{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangeInstitutionForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangeInstitutionForm.vue","mtime":1589906836717},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgYXV0aE1hcHBlciB9IGZyb20gJ0Avc3RvcmUvbW9kdWxlcy9hdXRoLm1vZHVsZScKaW1wb3J0IHsgUGx6IH0gZnJvbSAnQC91dGlsL3Bsei1zZXJ2aWNlJwppbXBvcnQgUGx6SW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL1BseklucHV0LnZ1ZScKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdBY2NvdW50JywKICBwcm9wczogWyd2aXNpYmxlJywgJ2luc3RpdHV0aW9uJ10sCiAgY29tcG9uZW50czogewogICAgUGx6SW5wdXQsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsgbmFtZTogJ2luc3RpdHV0aW9uJyB9KSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLmF1dGhNYXBwZXIubWFwQWN0aW9ucyh7CiAgICAgIHVwZGF0ZUluc3RpdHV0aW9uOiAndXBkYXRlSW5zdGl0dXRpb24nLAogICAgfSksCiAgICBzZXRQTFoocGx6OiBQbHopIHsKICAgICAgdGhpcy5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICB6aXA6IHBsei5maWVsZHMucGx6LAogICAgICAgIGNpdHk6IHBsei5maWVsZHMubm90ZSwKICAgICAgfSkKICAgIH0sCiAgICBzYXZlKCkgewogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVycjogYW55LCB2YWx1ZXM6IGFueSkgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdGhpcy51cGRhdGVJbnN0aXR1dGlvbih7CiAgICAgICAgICAuLi52YWx1ZXMsCiAgICAgICAgICBpbnN0aXR1dGlvblR5cGU6IHRoaXMuaW5zdGl0dXRpb24uaW5zdGl0dXRpb25UeXBlLAogICAgICAgICAgaWQ6IHRoaXMuaW5zdGl0dXRpb24uaWQsCiAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLnN1Y2Nlc3MoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnN0aXR1dGlvbiBlcmZvbGdyZWljaCBnZcOkbmRlcnQnLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCkKICAgICAgICAgICAgdGhpcy4kZW1pdCgnY3JlYXRlJykKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4gewogICAgICAgICAgICB0aGlzLiRub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnN0aXR1dGlvbiBrb25udGUgbmljaHQgZ2XDpG5kZXJ0IHdlcmRlbi4nLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgfSwKfSkK"},{"version":3,"sources":["ChangeInstitutionForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangeInstitutionForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-modal\n    :visible=\"visible\"\n    title=\"Institution ändern\"\n    okText=\"Speichern\"\n    cancelText=\"Abbrechen\"\n    @cancel=\"\n      () => {\n        $emit('cancel')\n      }\n    \"\n    @ok=\"save\"\n  >\n    <a-form :form=\"form\" :layout=\"'vertical'\">\n      <a-form-item label=\"Name\">\n        <a-input\n          v-decorator=\"[\n            'name',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'Bitte Namen eingeben',\n                },\n              ],\n              initialValue: institution.name,\n            },\n          ]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"E-Mail\">\n        <a-input v-decorator=\"['email', { initialValue: institution.email }]\" />\n      </a-form-item>\n      <a-form-item label=\"Telefonnummer\">\n        <a-input\n          v-decorator=\"[\n            'phoneNumber',\n            { initialValue: institution.phoneNumber },\n          ]\"\n        />\n      </a-form-item>\n      <div style=\"display: flex;\">\n        <a-form-item label=\"Straße\">\n          <a-input\n            v-decorator=\"[\n              'street',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Bitte Straße eingeben',\n                  },\n                ],\n                initialValue: institution.street,\n              },\n            ]\"\n          />\n        </a-form-item>\n        <a-form-item\n          label=\"Hausnummer\"\n          style=\"flex: 0 0 125px; margin-left: 15px;\"\n        >\n          <a-input\n            v-decorator=\"[\n              'houseNumber',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Bitte Hausnummer eingeben',\n                  },\n                ],\n                initialValue: institution.houseNumber,\n              },\n            ]\"\n          />\n        </a-form-item>\n      </div>\n      <div style=\"display: flex;\">\n        <PlzInput\n          :decorator=\"[\n            'zip',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'Bitte PLZ eingeben',\n                },\n              ],\n              initialValue: institution.zip,\n            },\n          ]\"\n          @plzChanged=\"setPLZ\"\n          style=\"margin-right: 15px;\"\n        />\n        <a-form-item label=\"Stadt\">\n          <a-input\n            v-decorator=\"[\n              'city',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Bitte Stadt eingeben',\n                  },\n                ],\n                initialValue: institution.city,\n              },\n            ]\"\n          />\n        </a-form-item>\n      </div>\n      <a-form-item label=\"Kommentar\">\n        <a-input\n          v-decorator=\"['comment', { initialValue: institution.comment }]\"\n        />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { authMapper } from '@/store/modules/auth.module'\nimport { Plz } from '@/util/plz-service'\nimport PlzInput from '@/components/PlzInput.vue'\n\nexport default Vue.extend({\n  name: 'Account',\n  props: ['visible', 'institution'],\n  components: {\n    PlzInput,\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'institution' }),\n    }\n  },\n  methods: {\n    ...authMapper.mapActions({\n      updateInstitution: 'updateInstitution',\n    }),\n    setPLZ(plz: Plz) {\n      this.form.setFieldsValue({\n        zip: plz.fields.plz,\n        city: plz.fields.note,\n      })\n    },\n    save() {\n      this.form.validateFields((err: any, values: any) => {\n        if (err) {\n          console.warn(err)\n          return\n        }\n        this.updateInstitution({\n          ...values,\n          institutionType: this.institution.institutionType,\n          id: this.institution.id,\n        })\n          .then(() => {\n            this.$notification.success({\n              message: 'Institution erfolgreich geändert',\n              description: '',\n            })\n            this.form.resetFields()\n            this.$emit('create')\n          })\n          .catch((error: Error) => {\n            this.$notification.error({\n              message: 'Institution konnte nicht geändert werden.',\n              description: error.message,\n            })\n          })\n      })\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}