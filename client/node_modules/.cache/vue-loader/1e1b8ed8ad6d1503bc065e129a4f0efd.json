{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RequestQuarantine.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RequestQuarantine.vue","mtime":1589906836724},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IFBhdGllbnQgfSBmcm9tICdAL2FwaS9Td2FnZ2VyQXBpJwppbXBvcnQgQXBpIGZyb20gJ0AvYXBpJwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IERhdGVJbnB1dCBmcm9tICcuLi9jb21wb25lbnRzL0RhdGVJbnB1dC52dWUnCmltcG9ydCBQYXRpZW50SW5wdXQgZnJvbSAnLi4vY29tcG9uZW50cy9QYXRpZW50SW5wdXQudnVlJwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKCmludGVyZmFjZSBTdGF0ZSB7CiAgZm9ybTogYW55IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogIHBhdGllbnQ/OiBQYXRpZW50OwogIHRvZGF5OiBtb21lbnQuTW9tZW50Cn0KCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdSZXF1ZXN0UXVhcmFudGluZScsCiAgY29tcG9uZW50czogewogICAgUGF0aWVudElucHV0LAogICAgRGF0ZUlucHV0LAogIH0sCiAgZGF0YSgpOiBTdGF0ZSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksCiAgICAgIHBhdGllbnQ6IHVuZGVmaW5lZCwKICAgICAgdG9kYXk6IG1vbWVudCgpLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdpdmVuUGF0aWVudElkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMucGF0aWVudElkCiAgICB9LAogICAgc2hvd1BhdGllbnRJbnB1dCgpOiBib29sZWFuIHsKICAgICAgcmV0dXJuICF0aGlzLmdpdmVuUGF0aWVudElkCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVycjogRXJyb3IsIHZhbHVlczogYW55KSA9PiB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7CiAgICAgICAgICBkYXRlVW50aWw6IHZhbHVlcy5kYXRlVW50aWwuZm9ybWF0KCdZWVlZLU1NLUREJyksCiAgICAgICAgICBldmVudERhdGU6IHZhbHVlcy5ldmVudERhdGUKICAgICAgICAgICAgPyB2YWx1ZXMuZXZlbnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgICAgIDogdW5kZWZpbmVkLAogICAgICAgICAgY29tbWVudDogdmFsdWVzLmNvbW1lbnQsCiAgICAgICAgfQogICAgICAgIGNvbnN0IHBhdGllbnRJZCA9IHRoaXMuZ2l2ZW5QYXRpZW50SWQKICAgICAgICAgID8gdGhpcy5naXZlblBhdGllbnRJZAogICAgICAgICAgOiB2YWx1ZXMucGF0aWVudElkCgogICAgICAgIEFwaS5yZXF1ZXN0UXVhcmFudGluZVVzaW5nUG9zdChwYXRpZW50SWQsIHJlcXVlc3QpCiAgICAgICAgICAudGhlbigocGF0aWVudCkgPT4gewogICAgICAgICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudAogICAgICAgICAgICB0aGlzLiRzdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogJ0RlciBRdWFyYW50w6RuZXZlcm1lcmsgd3VyZGUgZXJmYXNzdC4nLAogICAgICAgICAgICAgIGNvbnRlbnQ6IGgoJ2RpdicsIHt9LCBbCiAgICAgICAgICAgICAgICBoKCdkaXYnLCBgUGF0aWVudDogJHtwYXRpZW50LmZpcnN0TmFtZX0gJHtwYXRpZW50Lmxhc3ROYW1lfWApLAogICAgICAgICAgICAgICAgaCgKICAgICAgICAgICAgICAgICAgJ2RpdicsCiAgICAgICAgICAgICAgICAgIGBJbiBRdWFyYW50w6RuZSBiaXM6ICR7bW9tZW50KHBhdGllbnQucXVhcmFudGluZVVudGlsKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgJ0RELk1NLllZWVknCiAgICAgICAgICAgICAgICAgICl9YAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCkKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb24gPSB7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZlaGxlciBiZWltIGhpbnRlcmxlZ2VuIGRlcyBRdWFyYW50w6RuZXZlcm1lcmtzJywKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyLm1lc3NhZ2UsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKG5vdGlmaWNhdGlvbikKICAgICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogIH0sCn0pCg=="},{"version":3,"sources":["RequestQuarantine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RequestQuarantine.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <a-card style=\"max-width: 500px; margin: 2rem auto; min-height: 300px;\">\n    <a-form\n      :form=\"form\"\n      :label-col=\"{ span: 6 }\"\n      :wrapper-col=\"{ span: 18 }\"\n      @submit.prevent=\"handleSubmit\"\n    >\n      <!-- :colon=\"false\" -->\n\n      <a-form-item label=\"Patienten-ID\" v-if=\"this.showPatientInput\">\n        <PatientInput\n          v-decorator=\"[\n            'patientId',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'Bitte geben Sie die Patienten-ID ein.',\n                },\n              ],\n            },\n          ]\"\n        />\n      </a-form-item>\n\n      <a-form-item label=\"Quarantäne bis\">\n        <DateInput\n          :value=\"today\"\n          v-decorator=\"[\n            'dateUntil',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'Bis wann soll der Patient in Quarantäne?',\n                },\n              ],\n            },\n          ]\"\n        />\n      </a-form-item>\n\n      <a-form-item label=\"Vorgemerkt am\">\n        <DateInput\n          :defaultValue=\"today\"\n          v-decorator=\"[\n            'eventDate',\n            {\n              rules: [\n                {\n                  required: false,\n                  message:\n                    'Datum, für welches der Vermerk erfasst werden soll.',\n                },\n              ],\n            },\n          ]\"\n        />\n      </a-form-item>\n\n      <!-- Kommentar -->\n      <a-form-item label=\"Kommentar\">\n        <a-textarea\n          :autoSize=\"{ minRows: 3, maxRows: 5 }\"\n          placeholder=\"Kommentar hinzufügen\"\n          v-decorator=\"['comment']\"\n        />\n      </a-form-item>\n\n      <!-- Submit -->\n      <a-divider />\n      <a-form-item :wrapper-col=\"{ span: 24, offset: 0 }\">\n        <a-button html-type=\"submit\" type=\"primary\">\n          Speichern\n        </a-button>\n      </a-form-item>\n    </a-form>\n  </a-card>\n</template>\n\n<script lang=\"ts\">\nimport { Patient } from '@/api/SwaggerApi'\nimport Api from '@/api'\nimport Vue from 'vue'\nimport DateInput from '../components/DateInput.vue'\nimport PatientInput from '../components/PatientInput.vue'\nimport moment from 'moment'\n\ninterface State {\n  form: any // eslint-disable-next-line\n  patient?: Patient;\n  today: moment.Moment\n}\n\nexport default Vue.extend({\n  name: 'RequestQuarantine',\n  components: {\n    PatientInput,\n    DateInput,\n  },\n  data(): State {\n    return {\n      form: this.$form.createForm(this),\n      patient: undefined,\n      today: moment(),\n    }\n  },\n  computed: {\n    givenPatientId(): string | undefined {\n      return this.$route.params.patientId\n    },\n    showPatientInput(): boolean {\n      return !this.givenPatientId\n    },\n  },\n  methods: {\n    handleSubmit() {\n      this.form.validateFields((err: Error, values: any) => {\n        // eslint-disable-next-line\n        if (err) {\n          return\n        }\n        const request = {\n          dateUntil: values.dateUntil.format('YYYY-MM-DD'),\n          eventDate: values.eventDate\n            ? values.eventDate.format('YYYY-MM-DD')\n            : undefined,\n          comment: values.comment,\n        }\n        const patientId = this.givenPatientId\n          ? this.givenPatientId\n          : values.patientId\n\n        Api.requestQuarantineUsingPost(patientId, request)\n          .then((patient) => {\n            const h = this.$createElement\n            this.$success({\n              title: 'Der Quarantänevermerk wurde erfasst.',\n              content: h('div', {}, [\n                h('div', `Patient: ${patient.firstName} ${patient.lastName}`),\n                h(\n                  'div',\n                  `In Quarantäne bis: ${moment(patient.quarantineUntil).format(\n                    'DD.MM.YYYY'\n                  )}`\n                ),\n              ]),\n            })\n            this.form.resetFields()\n          })\n          .catch((err) => {\n            const notification = {\n              message: 'Fehler beim hinterlegen des Quarantänevermerks',\n              description: err.message,\n            }\n            this.$notification.error(notification)\n          })\n      })\n    },\n  },\n})\n</script>\n\n<style></style>\n"]}]}