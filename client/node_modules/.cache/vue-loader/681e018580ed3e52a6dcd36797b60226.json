{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterInstitution.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterInstitution.vue","mtime":1589906836724},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IEFwaSBmcm9tICdAL2FwaScKCmZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmRSZXBlYXQocGFzc3dvcmQ6IHN0cmluZywgcGFzc3dvcmRSZXBlYXQ6IHN0cmluZykgewogIGlmIChwYXNzd29yZCA9PT0gcGFzc3dvcmRSZXBlYXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkYXRlU3RhdHVzOiAnc3VjY2VzcycsCiAgICAgIGVycm9yTXNnOiBudWxsLAogICAgfQogIH0KICByZXR1cm4gewogICAgdmFsaWRhdGVTdGF0dXM6ICdlcnJvcicsCiAgICBlcnJvck1zZzogJ1Bhc3N3w7ZydGVyIHN0aW1tZW4gbmljaHQgw7xiZXJlaW4nLAogIH0KfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1JlZ2lzdGVySW5zdGl0dXRpb25QYWdlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsgbmFtZTogJ2Nvb3JkaW5hdGVkJyB9KSwKICAgICAgY3JlYXRlZEluc3RpdHV0aW9uOiBudWxsLAogICAgICBkYXRhUHJvY2Vzc2luZ0NsYXNzOiAnJywKICAgICAgY2hlY2tlZDogZmFsc2UsCiAgICAgIHBhc3N3b3JkUmVwZWF0OiB7fSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2hlY2soZTogYW55KSB7CiAgICAgIHRoaXMuY2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWQKICAgIH0sCiAgICAvLyBGb3IgRXhwbGFuYXRpb24gb2YgZHluYW1pYyBmb3JtIHZhbGlkYXRpb24KICAgIC8vIHNlZSBodHRwczovL3d3dy5hbnRkdi5jb20vY29tcG9uZW50cy9mb3JtLyNjb21wb25lbnRzLWZvcm0tZGVtby1oYW5kbGUtZm9ybS1kYXRhLW1hbnVhbGx5CiAgICBoYW5kbGVQYXNzd29yZFJlcGVhdENoYW5nZShldmVudDogYW55KSB7CiAgICAgIHRoaXMucGFzc3dvcmRSZXBlYXQgPSB2YWxpZGF0ZVBhc3N3b3JkUmVwZWF0KAogICAgICAgIHRoaXMuZm9ybS5nZXRGaWVsZFZhbHVlKCdwYXNzd29yZCcpLAogICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZQogICAgICApCiAgICB9LAogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVycjogYW55LCB2YWx1ZXM6IGFueSkgPT4gewogICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmRhdGFQcm9jZXNzaW5nQ2xhc3MgPSAnZGF0YS1wcm9jZXNzaW5nLW5vdC1zZWxlY3RlZCcKICAgICAgICAgIHJldHVybgogICAgICAgIH0gZWxzZSBpZiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycikKICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgdmFsdWVzID0gewogICAgICAgICAgLi4udmFsdWVzLAogICAgICAgICAgdXNlcjogewogICAgICAgICAgICB1c2VybmFtZTogdmFsdWVzLnVzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZDogdmFsdWVzLnBhc3N3b3JkLAogICAgICAgICAgICB1c2VyUm9sZTogJ1VTRVJfUk9MRV9BRE1JTicsCiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgICBBcGkucmVnaXN0ZXJJbnN0aXR1dGlvblVzaW5nUG9zdCh2YWx1ZXMpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNldEZpZWxkcygpCiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnSW5zdGl0dXRpb24gcmVnaXN0cmllcnQuJywKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0RpZSBJbnN0aXR1dGlvbiB3dXJkZSBlcmZvbGdyZWljaCByZWdpc3RyaWVydC4nLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJG5vdGlmaWNhdGlvbi5zdWNjZXNzKG5vdGlmaWNhdGlvbikKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2F1dGhNb2R1bGUvbG9naW4nLCB7CiAgICAgICAgICAgICAgdXNlcm5hbWU6IHZhbHVlcy51c2VybmFtZSwKICAgICAgICAgICAgICBwYXNzd29yZDogdmFsdWVzLnBhc3N3b3JkLAogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnRmVobGVyIGJlaW0gUmVnaXN0cmllcmVuIGRlciBJbnN0aXR1dGlvbi4nLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnIubWVzc2FnZSwKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRub3RpZmljYXRpb24uZXJyb3Iobm90aWZpY2F0aW9uKQogICAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgfSwKfSkK"},{"version":3,"sources":["RegisterInstitution.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegisterInstitution.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div v-if=\"!createdInstitution\">\n      <a-card style=\"margin: 3rem auto; max-width: 860px;\">\n        <div class=\"login-header\">\n          <img src=\"../assets/logo.png\" height=\"100\" />\n          <h3>\n            Registrieren Sie hier eine neue Instutition in IMIS.\n          </h3>\n        </div>\n\n        <a-form\n          :form=\"form\"\n          :layout=\"'horizontal'\"\n          :labelCol=\"{ span: 6 }\"\n          :wrapperCol=\"{ span: 18 }\"\n          @submit.prevent=\"handleSubmit\"\n        >\n          <a-row>\n            <a-col :span=\"24\">\n              <a-form-item label=\"Benutzername\">\n                <a-input\n                  v-decorator=\"['username', { rules: [{ required: true }] }]\"\n                >\n                  <a-icon slot=\"prefix\" type=\"user\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"24\">\n              <a-form-item label=\"Passwort\">\n                <a-input\n                  v-decorator=\"['password', { rules: [{ required: true }] }]\"\n                  type=\"password\"\n                >\n                  <a-icon slot=\"prefix\" type=\"lock\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"24\">\n              <a-form-item\n                label=\"Passwort wiederholen\"\n                has-feedback\n                :validate-status=\"passwordRepeat.validateStatus\"\n                :help=\"passwordRepeat.errorMsg\"\n              >\n                <a-input\n                  v-decorator=\"[\n                    'password-repeat',\n                    { rules: [{ required: true }] },\n                  ]\"\n                  @change=\"handlePasswordRepeatChange\"\n                  type=\"password\"\n                >\n                  <a-icon slot=\"prefix\" type=\"lock\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-divider></a-divider>\n          <a-row>\n            <a-col :md=\"12\">\n              <a-form-item label=\"Typ\">\n                <a-select\n                  v-decorator=\"[\n                    'institutionType',\n                    {\n                      rules: [\n                        {\n                          required: true,\n                          message: 'Please select your institution type!',\n                        },\n                      ],\n                    },\n                  ]\"\n                  placeholder=\"Bitte wählen...\"\n                >\n                  <a-select-option value=\"LABORATORY\">Labor</a-select-option>\n                  <a-select-option value=\"DOCTORS_OFFICE\"\n                    >Arztpraxis</a-select-option\n                  >\n                  <a-select-option value=\"CLINIC\">Klinik</a-select-option>\n                  <a-select-option value=\"TEST_SITE\"\n                    >Teststelle</a-select-option\n                  >\n                </a-select>\n              </a-form-item>\n              <a-form-item label=\"Name\">\n                <a-input\n                  v-decorator=\"['name', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Straße\">\n                <a-input\n                  v-decorator=\"['street', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Hausnr.\">\n                <a-input\n                  v-decorator=\"['houseNumber', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"12\">\n              <a-form-item label=\"PLZ\">\n                <a-input\n                  v-decorator=\"['zip', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Ort\">\n                <a-input\n                  v-decorator=\"['city', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"E-mail\">\n                <a-input\n                  v-decorator=\"['email', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Telefon\">\n                <a-input\n                  v-decorator=\"['phoneNumber', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-row>\n            <a-col>\n              <a-form-item\n                label=\"Anmerkungen\"\n                :labelCol=\"{ span: 24 }\"\n                :wrapperCol=\"{ span: 24 }\"\n              >\n                <a-input v-decorator=\"['comment']\" />\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-row>\n            <a-col>\n              <!-- Datenschutzerklärung Bestätigung-->\n              <a-form-item>\n                <a-checkbox @change=\"onCheck\">\n                  <span :class=\"dataProcessingClass\">\n                    Ich erkläre mich mit der Übermittlung dieser Daten zur\n                    weiteren Verarbeitung einverstanden.\n                  </span>\n                </a-checkbox>\n              </a-form-item>\n            </a-col>\n            <a-col>\n              <!-- Submit Button -->\n              <a-form-item :wrapperCol=\"{ span: 24, offset: 0 }\">\n                <a-row :gutter=\"16\" type=\"flex\" justify=\"end\">\n                  <a-col>\n                    <a-button type=\"primary\" html-type=\"submit\">\n                      Registrieren\n                    </a-button>\n                  </a-col>\n                </a-row>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-form>\n      </a-card>\n    </div>\n    <div v-else>\n      <div>Die Institution wurde erfolgreich registriert.</div>\n      <br />\n      <div>Die Instituions ID lautet: {{ createdInstitution.id }}</div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport Api from '@/api'\n\nfunction validatePasswordRepeat(password: string, passwordRepeat: string) {\n  if (password === passwordRepeat) {\n    return {\n      validateStatus: 'success',\n      errorMsg: null,\n    }\n  }\n  return {\n    validateStatus: 'error',\n    errorMsg: 'Passwörter stimmen nicht überein',\n  }\n}\n\nexport default Vue.extend({\n  name: 'RegisterInstitutionPage',\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'coordinated' }),\n      createdInstitution: null,\n      dataProcessingClass: '',\n      checked: false,\n      passwordRepeat: {},\n    }\n  },\n  methods: {\n    onCheck(e: any) {\n      this.checked = e.target.checked\n    },\n    // For Explanation of dynamic form validation\n    // see https://www.antdv.com/components/form/#components-form-demo-handle-form-data-manually\n    handlePasswordRepeatChange(event: any) {\n      this.passwordRepeat = validatePasswordRepeat(\n        this.form.getFieldValue('password'),\n        event.target.value\n      )\n    },\n    handleSubmit() {\n      this.form.validateFields((err: any, values: any) => {\n        if (!this.checked) {\n          this.dataProcessingClass = 'data-processing-not-selected'\n          return\n        } else if (err) {\n          console.error(err)\n          return\n        }\n\n        values = {\n          ...values,\n          user: {\n            username: values.username,\n            password: values.password,\n            userRole: 'USER_ROLE_ADMIN',\n          },\n        }\n        Api.registerInstitutionUsingPost(values)\n          .then(() => {\n            this.form.resetFields()\n            const notification = {\n              message: 'Institution registriert.',\n              description: 'Die Institution wurde erfolgreich registriert.',\n            }\n            this.$notification.success(notification)\n            this.$store.dispatch('authModule/login', {\n              username: values.username,\n              password: values.password,\n            })\n          })\n          .catch((err) => {\n            const notification = {\n              message: 'Fehler beim Registrieren der Institution.',\n              description: err.message,\n            }\n            this.$notification.error(notification)\n          })\n      })\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\">\n.wrapper {\n  text-align: left;\n  padding: 2%;\n  width: 100%;\n}\n\n.data-processing-not-selected {\n  color: red;\n}\n\n.login-header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n</style>\n"]}]}