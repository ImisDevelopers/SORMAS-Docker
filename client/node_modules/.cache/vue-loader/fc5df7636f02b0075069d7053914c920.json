{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterPatient.vue?vue&type=style&index=0&id=e96bab4a&scoped=true&lang=css&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterPatient.vue","mtime":1586713315433},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/css-loader/dist/cjs.js","mtime":1584795993125},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584795993380},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/postcss-loader/src/index.js","mtime":1584795993354},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLndyYXBwZXIgewogIHRleHQtYWxpZ246IGxlZnQ7CiAgcGFkZGluZzogMiU7CiAgd2lkdGg6IDEwMCU7Cn0KCg=="},{"version":3,"sources":["RegisterPatient.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqcA;AACA;AACA;AACA;AACA","file":"RegisterPatient.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"wrapper\">\n\n    <!-- Patient successfully created info -->\n    <div v-if=\"createdPatient\" style=\"display: flex; justify-content: center; text-align: center\">\n      <a-card style=\"max-width: 600px; margin-bottom: 25px\">\n        <div style=\"display: flex; flex-direction: column; position: relative\">\n          <a-icon type=\"close\" style=\"top: 0; right: 0; position: absolute; cursor: pointer\"\n                  @click=\"createdPatient = null\" />\n          <div style=\"display: flex; align-items: center; margin: 10px\">\n            <a-icon type=\"check-circle\" :style=\"{ fontSize: '38px', color: '#08c' }\" style=\"margin: 0 25px 0 0\" />\n            <h3 style=\"margin-bottom: 0\">\n              <span v-if=\"createdPatient.gender === 'female'\">Patientin</span>\n              <span v-else>Patient</span>\n              wurde erfolgreich registriert.\n            </h3>\n          </div>\n          <table style=\"border-collapse: separate; border-spacing: 15px 5px; text-align: left\">\n            <tbody>\n              <tr>\n                <td>Name:</td>\n                <td>{{ createdPatient.firstName }} {{ createdPatient.lastName }}</td>\n              </tr>\n              <tr>\n                <td>Patienten-ID:</td>\n                <td>{{ createdPatient.id }}</td>\n              </tr>\n            </tbody>\n          </table>\n          <div style=\"margin-top: 15px\">\n            <router-link :to=\"{ name: 'patient-detail', params: { id: createdPatient.id } }\" style=\"margin-right: 15px\">\n              <a-button type=\"primary\">\n                Patienten einsehen\n              </a-button>\n            </router-link>\n            <router-link :to=\"{ name: 'register-test' }\">\n              <a-button type=\"primary\">\n                Probe zuordnen\n              </a-button>\n            </router-link>\n          </div>\n        </div>\n      </a-card>\n    </div>\n\n    <!-- Patient Registration Form -->\n    <div>\n      <h3>\n        Registrieren Sie hier neue Patienten in IMIS. Bitte füllen Sie den Bogen\n        vollständig aus.\n      </h3>\n\n      <a-form\n        :form=\"form\"\n        :layout=\"'horizontal'\"\n        :labelCol=\"{ span: 8 }\"\n        :wrapperCol=\"{ span: 16 }\"\n        @submit.prevent=\"handleSubmit\"\n      >\n\n        <a-collapse defaultActiveKey=\"1\">\n\n          <!-- Stammdaten -->\n          <a-collapse-panel header=\"Allgemeines\" key=\"1\">\n            <PatientStammdaten :form=\"form\" @gender=\"genderSelected\" :show-stay=\"true\" :show-death=\"true\" />\n          </a-collapse-panel>\n\n          <!-- Infektionskette / Exposure -->\n          <a-collapse-panel header=\"Exposition\" key=\"2\">\n            <a-form-item\n              :label=\"'Bitte zutreffendes ankreuzen:'\"\n              :labelCol=\"{ div: 24 }\"\n              :wrapperCol=\"{ div: 24 }\"\n            >\n              <a-checkbox-group v-decorator=\"['exposures']\" @change=\"exposuresChanged\">\n                <a-row>\n                  <a-col :span=\"24\" v-for=\"exposure in EXPOSURES_INTERNAL\" :key=\"exposure.value\">\n                    <a-checkbox :value=\"exposure.value\">\n                      {{exposure.label}}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n              </a-checkbox-group>\n              <a-checkbox-group v-decorator=\"['exposureLocation']\" :disabled=\"disableExposureLocation\"\n                                style=\"padding-left: 30px\">\n                <a-row>\n                  <a-col :span=\"24\" v-for=\"exposure in EXPOSURE_LOCATIONS\" :key=\"exposure.value\">\n                    <a-checkbox :value=\"exposure.value\">\n                      {{exposure.label}}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n              </a-checkbox-group>\n            </a-form-item>\n          </a-collapse-panel>\n\n          <!-- Symptoms -->\n          <a-collapse-panel header=\"Symptome\" key=\"3\">\n            <a-form-item\n              :label=\"'Welche Symptome weist ' + patientString + ' auf?'\"\n              :labelCol=\"{ div: 24 }\"\n              :wrapperCol=\"{ div: 24 }\"\n            >\n              <a-checkbox-group v-decorator=\"['symptoms']\">\n                <a-row>\n                  <a-col :span=\"symptom.value === 'LOSS_OF_SENSE_OF_SMELL_TASTE' ? 12 : 6\" v-for=\"symptom in SYMPTOMS\"\n                         :key=\"symptom.value\">\n                    <a-checkbox :value=\"symptom.value\">\n                      {{symptom.label}}\n                    </a-checkbox>\n                  </a-col>\n                  <a-col :span=\"12\" v-for=\"symptom in ADDITIONAL_SYMPTOMS\" :key=\"symptom.value\">\n                    <a-checkbox :value=\"symptom.value\">\n                      {{symptom.label}}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n              </a-checkbox-group>\n              <div style=\"display: flex; align-items: center; align-self: stretch\">\n                <a-checkbox :checked=\"showOtherSymptoms\" @change=\"symptomsChanged\" style=\"flex: 0 0 auto\">\n                  Andere:\n                </a-checkbox>\n                <a-form-item style=\"flex: 1 1 100%; margin-bottom: 0; max-width: 600px\">\n                  <a-input v-decorator=\"['symptomsOther']\" :disabled=\"!showOtherSymptoms\" />\n                </a-form-item>\n              </div>\n            </a-form-item>\n\n            <a-form-item\n              label=\"Wie schnell sind die Beschwerden aufgetreten?\"\n              :labelCol=\"{ div: 24 }\"\n              :wrapperCol=\"{ div: 24 }\"\n            >\n              <a-radio-group\n                v-decorator=\"['speedOfSymptomsOutbreak']\"\n              >\n                <a-radio value=\"suddenly\">\n                  Plötzlich, innerhalb von einem Tag\n                </a-radio>\n                <a-radio value=\"slow\">\n                  Langsam, innerhalb von mehreren Tagen\n                </a-radio>\n              </a-radio-group>\n            </a-form-item>\n\n            <a-form-item\n              :label=\"'Hat ' + patientString + ' für diese Saison eine Influenza-Impfung erhalten?'\"\n              :labelCol=\"{ div: 24 }\"\n              :wrapperCol=\"{ div: 24 }\"\n            >\n              <a-radio-group v-decorator=\"['fluImmunization']\">\n                <a-radio value=\"true\">Ja</a-radio>\n                <a-radio value=\"false\">Nein</a-radio>\n              </a-radio-group>\n            </a-form-item>\n          </a-collapse-panel>\n\n          <!-- Risks / Pre Illnesses -->\n          <a-collapse-panel header=\"Vorerkrankungen\" key=\"4\">\n            <a-form-item\n              :label=\"'Welche Vererkrankungen und Risikofaktoren liegen vor?'\"\n              :labelCol=\"{ div: 24 }\"\n              :wrapperCol=\"{ div: 24 }\"\n            >\n              <a-checkbox-group v-decorator=\"['preIllnesses']\">\n                <a-row>\n                  <a-col :span=\"8\" v-for=\"preIllness in PRE_ILLNESSES\" :key=\"preIllness.value\">\n                    <a-checkbox :value=\"preIllness.value\">\n                      {{preIllness.label}}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n              </a-checkbox-group>\n            </a-form-item>\n          </a-collapse-panel>\n\n          <!-- Krankheitsdetails -->\n          <a-collapse-panel header=\"Krankheit\" key=\"5\">\n            <a-row>\n              <a-col :span=\"4\" />\n              <a-col :span=\"20\">\n                <div style=\"display: flex; align-items: center;\">\n                  <a-form-item :wrapperCol=\"{span: 24}\">\n                    <a-checkbox :checked=\"!disableHospitalization\" @change=\"hospitalizationChanged\">\n                      {{patientString}} ist hospitalisiert\n                    </a-checkbox>\n                  </a-form-item>\n                  <DateInput style=\"flex: 0 1 400px\" label=\"Seit\" :decorator=\"['dateOfHospitalization']\"\n                             :disabled=\"disableHospitalization\" />\n                  <a-form-item style=\"padding-left: 15px;\" :wrapperCol=\"{span: 24}\">\n                    <a-checkbox :disabled=\"disableHospitalization\" :decorator=\"['onIntensiveCareUnit']\">\n                      Auf der Intensivstation\n                    </a-checkbox>\n                  </a-form-item>\n                </div>\n              </a-col>\n            </a-row>\n            <a-row>\n              <a-col :span=\"12\">\n                <a-form-item label=\"Art der Erkrankung\">\n                  <a-select\n                    v-decorator=\"['illnessType', { rules: [{\n                      required: true,\n                      message: 'Bitte Erkrankung wählen',\n                    }], initialValue: 'CORONA'}]\"\n                    placeholder=\"Bitte wählen...\"\n                  >\n                    <a-select-option value=\"CORONA\">SARS-nCoV-2</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <DateInput label=\"Erkrankungsdatum\" :decorator=\"['dateOfIllness', { rules: [{\n                      required: true,\n                      message: 'Bitte Erkrankungsdatum wählen',\n                    }], initialValue: today}]\" />\n              </a-col>\n            </a-row>\n            <a-row>\n              <a-col :span=\"12\">\n                <a-form-item label=\"Fallstatus\">\n                  <a-select style=\"width: 250px\" placeholder=\"Status\" v-decorator=\"['patientStatus', { rules: [{\n                      required: true,\n                      message: 'Bitte Status wählen',\n                    }], initialValue: 'SUSPECTED' }]\">\n                    <a-select-option v-for=\"eventType in EVENT_TYPES\" :key=\"eventType.id\">\n                      <a-icon :type=\"eventType.icon\" style=\"margin-right: 5px\" />\n                      {{eventType.label}}\n                    </a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <DateInput label=\"Meldedatum\" :decorator=\"['dateOfReporting', { rules: [{\n                      required: true,\n                      message: 'Bitte Meldedatum wählen'\n                    }], initialValue: today}]\" />\n              </a-col>\n            </a-row>\n            <a-row>\n              <a-col :span=\"4\" />\n              <a-col :span=\"20\">\n                <a-checkbox @change=\"testOrderedChanged\" style=\"margin-bottom: 15px\"\n                            :checked=\"!disableTestOrder\">\n                  Wurde eine Erregerdiagnostik beauftragt?\n                </a-checkbox>\n              </a-col>\n            </a-row>\n            <a-row>\n              <a-col :span=\"12\">\n                <LaboratoryInput\n                  label=\"Labor\"\n                  :form=\"form\"\n                  :validation=\"['laboratoryId']\"\n                  :disabled=\"disableTestOrder\"\n                />\n              </a-col>\n              <a-col :span=\"12\">\n                <DateInput label=\"Datum der Probenentnahme\" :decorator=\"['dateOfTest']\" :disabled=\"disableTestOrder\" />\n              </a-col>\n            </a-row>\n          </a-collapse-panel>\n        </a-collapse>\n\n        <!-- Submit Button -->\n        <a-form-item :wrapperCol=\"{ span: 24, offset: 0 }\" style=\"margin-top: 15px\">\n          <a-row :gutter=\"16\" type=\"flex\" justify=\"end\">\n            <a-col>\n              <a-button type=\"primary\" html-type=\"submit\" size=\"large\">\n                <a-icon type=\"save\" />\n                Patient registrieren\n              </a-button>\n            </a-col>\n          </a-row>\n        </a-form-item>\n      </a-form>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport Api from '@/api'\nimport { Patient } from '@/api/SwaggerApi'\nimport PatientStammdaten from '@/components/PatientStammdaten.vue'\nimport { ADDITIONAL_SYMPTOMS, SYMPTOMS } from '@/models/symptoms'\nimport { Option } from '@/models'\nimport { PRE_ILLNESSES } from '@/models/pre-illnesses'\nimport { EXPOSURE_LOCATIONS, EXPOSURES_INTERNAL } from '@/models/exposures'\nimport DateInput from '@/components/DateInput.vue'\nimport { EventTypeItem, eventTypes } from '@/models/event-types'\nimport moment, { Moment } from 'moment'\nimport LaboratoryInput from '@/components/LaboratoryInput.vue'\n\ninterface State {\n  form: any;\n  createdPatient: Patient | null;\n  SYMPTOMS: Option[];\n  PRE_ILLNESSES: Option[];\n  ADDITIONAL_SYMPTOMS: Option[];\n  EXPOSURES_INTERNAL: Option[];\n  EXPOSURE_LOCATIONS: Option[];\n  EVENT_TYPES: EventTypeItem[];\n  showOtherSymptoms: boolean;\n  patientString: string;\n  disableExposureLocation: boolean;\n  disableHospitalization: boolean;\n  disableTestOrder: boolean;\n  today: Moment;\n}\n\nexport default Vue.extend({\n  components: {\n    PatientStammdaten,\n    DateInput,\n    LaboratoryInput,\n  },\n  name: 'RegisterPatient',\n  data(): State {\n    return {\n      form: this.$form.createForm(this, { name: 'coordinated' }),\n      createdPatient: null,\n      SYMPTOMS,\n      ADDITIONAL_SYMPTOMS,\n      PRE_ILLNESSES,\n      EXPOSURES_INTERNAL,\n      EXPOSURE_LOCATIONS,\n      EVENT_TYPES: eventTypes,\n      disableExposureLocation: true,\n      showOtherSymptoms: false,\n      patientString: 'der Patient',\n      disableHospitalization: true,\n      disableTestOrder: true,\n      today: moment(),\n    }\n  },\n  methods: {\n    handleSubmit() {\n      this.form.validateFields(async(err: Error, values: any) => {\n        if (err) {\n          return\n        }\n        const request = {\n          ...values,\n          dateOfBirth: values.dateOfBirth.format('YYYY-MM-DD'),\n          riskAreas: [],\n        }\n\n        if (values.dateofIllness) {\n          request.dateOfIllness = values.dateOfIllness.format('YYYY-MM-DD')\n        } else {\n          request.dateOfIllness = moment().format('YYYY-MM-DD')\n        }\n\n        if (values.dateOfReporting) {\n          request.dateOfReporting = values.dateOfReporting.format('YYYY-MM-DD')\n        } else {\n          request.dateOfReporting = moment().format('YYYY-MM-DD')\n        }\n\n        if (!request.symptoms) {\n          request.symptoms = []\n        }\n        if (!request.preIllnesses) {\n          request.preIllnesses = []\n        }\n\n        if (request.dateOfDeath) {\n          request.dateOfDeath = request.dateOfDeath.format('YYYY-MM-DD')\n        }\n\n        if (!this.disableHospitalization) {\n          request.dateOfHospitalization = values.dateOfHospitalization.format('YYYY-MM-DD')\n          request.onIntensiveCareUnit = values.onIntensiveCareUnit\n        } else {\n          request.dateOfHospitalization = null\n          request.onIntensiveCareUnit = null\n        }\n\n        if (!this.disableTestOrder) {\n          request.laboratoryId = values.laboratoryId\n          request.dateOfTest = values.dateOfTest.format('YYYY-MM-DD')\n        } else {\n          request.laboratoryId = null\n          request.dateOfTest = null\n        }\n\n        if (values.exposures) {\n          request.riskAreas = request.riskAreas.concat(values.exposures)\n        }\n        if (this.showOtherSymptoms) {\n          request.symptoms.push(values.symptomsOther)\n        }\n        if (values.exposureLocation) {\n          request.riskAreas = request.riskAreas.concat(\n            values.exposureLocation\n              .map((location: string) => 'CONTACT_WITH_CORONA_' + location),\n          )\n        }\n\n        const patientString = request.gender === 'female' ? 'Patientin' : 'Patient'\n\n        Api.api.addPatientUsingPost(request).then((patient: Patient) => {\n          this.form.resetFields()\n          this.createdPatient = patient as any\n          this.disableExposureLocation = true\n          this.disableTestOrder = true\n          this.disableHospitalization = true\n          this.showOtherSymptoms = false\n          this.form.setFieldsValue({\n            symptomsOther: undefined,\n            symptomsOtherActivated: undefined,\n          })\n          const notification = {\n            message: patientString + ' registriert.',\n            description: 'Der ' + patientString + ' wurde erfolgreich registriert.',\n          }\n          this.$notification.success(notification)\n          window.scrollTo(0, 0)\n        }).catch((error: Error) => {\n          console.error(error)\n          const notification = {\n            message: patientString + ' nicht registriert.',\n            description: 'Der ' + patientString + ' konnte nicht registriert werden.',\n          }\n          this.$notification.error(notification)\n        })\n      })\n    },\n    symptomsChanged(event: Event) {\n      const target = event.target as any\n      this.showOtherSymptoms = target.checked\n    },\n    genderSelected(gender: string) {\n      console.log(gender)\n      this.patientString = gender === 'female' ? 'die Patientin' : 'der Patient'\n    },\n    exposuresChanged(checkedValues: string[]) {\n      this.disableExposureLocation = !checkedValues.includes('CONTACT_WITH_CORONA_CASE')\n    },\n    hospitalizationChanged(event: Event) {\n      const target = event.target as any\n      this.disableHospitalization = !target.checked\n    },\n    testOrderedChanged(event: Event) {\n      const target = event.target as any\n      this.disableTestOrder = !target.checked\n    },\n  },\n})\n</script>\n\n<style scoped>\n  .wrapper {\n    text-align: left;\n    padding: 2%;\n    width: 100%;\n  }\n\n</style>\n"]}]}