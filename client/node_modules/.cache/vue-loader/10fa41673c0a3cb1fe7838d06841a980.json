{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePatientStammdatenForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePatientStammdatenForm.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IFBhdGllbnRTdGFtbWRhdGVuIGZyb20gJy4vUGF0aWVudFN0YW1tZGF0ZW4udnVlJwppbXBvcnQgQXBpIGZyb20gJ0AvYXBpJwppbXBvcnQgeyBwYXRpZW50TWFwcGVyIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL3BhdGllbnRzLm1vZHVsZScKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdDaGFuZ2VQYXRpZW50U3RhbW1kYXRlbkZvcm0nLAogIHByb3BzOiBbJ3Zpc2libGUnLCAncGF0aWVudCddLAogIGNvbXBvbmVudHM6IHsKICAgIFBhdGllbnRTdGFtbWRhdGVuLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzLCB7IG5hbWU6ICdwYXRpZW50JyB9KSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLnBhdGllbnRNYXBwZXIubWFwTXV0YXRpb25zKHsKICAgICAgc2V0UGF0aWVudDogJ3NldFBhdGllbnQnLAogICAgfSksCiAgICBzYXZlKCkgewogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVycjogYW55LCB2YWx1ZXM6IGFueSkgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdmFsdWVzLmRhdGVPZkJpcnRoID0gdmFsdWVzLmRhdGVPZkJpcnRoLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgaWYgKHZhbHVlcy5kYXRlT2ZEZWF0aCkgewogICAgICAgICAgdmFsdWVzLmRhdGVPZkRlYXRoID0gdmFsdWVzLmRhdGVPZkRlYXRoLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgfQogICAgICAgIHZhbHVlcyA9IHsgLi4udGhpcy5wYXRpZW50LCAuLi52YWx1ZXMgfQogICAgICAgIEFwaS51cGRhdGVQYXRpZW50VXNpbmdQdXQodmFsdWVzKQogICAgICAgICAgLnRoZW4oKHVwZGF0ZWRQYXRpZW50KSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2V0UGF0aWVudCh1cGRhdGVkUGF0aWVudCkKICAgICAgICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLnN1Y2Nlc3MoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXRpZW50IGVyZm9sZ3JlaWNoIGFrdHVhbGlzaWVydCcsCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmZvcm0ucmVzZXRGaWVsZHMoKQogICAgICAgICAgICB0aGlzLiRlbWl0KCdjcmVhdGUnKQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3I6IEVycm9yKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ1BhdGllbnQga29ubnRlIG5pY2h0IGFrdHVhbGlzaWVydCB3ZXJkZW4uJywKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSwKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogIH0sCn0pCg=="},{"version":3,"sources":["ChangePatientStammdatenForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePatientStammdatenForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-modal\n    :visible=\"visible\"\n    title=\"Patientenstammdaten Ã¤ndern\"\n    okText=\"Speichern\"\n    cancelText=\"Abbrechen\"\n    @cancel=\"\n      () => {\n        $emit('cancel')\n      }\n    \"\n    @ok=\"save\"\n    width=\"650px\"\n  >\n    <a-form :form=\"form\" :layout=\"'vertical'\" :wrapperCol=\"{ span: 23 }\">\n      <PatientStammdaten\n        :patient=\"patient\"\n        :form=\"form\"\n        show-death=\"true\"\n        show-stay=\"true\"\n      />\n    </a-form>\n  </a-modal>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport PatientStammdaten from './PatientStammdaten.vue'\nimport Api from '@/api'\nimport { patientMapper } from '@/store/modules/patients.module'\n\nexport default Vue.extend({\n  name: 'ChangePatientStammdatenForm',\n  props: ['visible', 'patient'],\n  components: {\n    PatientStammdaten,\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'patient' }),\n    }\n  },\n  methods: {\n    ...patientMapper.mapMutations({\n      setPatient: 'setPatient',\n    }),\n    save() {\n      this.form.validateFields((err: any, values: any) => {\n        if (err) {\n          console.warn(err)\n          return\n        }\n        values.dateOfBirth = values.dateOfBirth.format('YYYY-MM-DD')\n        if (values.dateOfDeath) {\n          values.dateOfDeath = values.dateOfDeath.format('YYYY-MM-DD')\n        }\n        values = { ...this.patient, ...values }\n        Api.updatePatientUsingPut(values)\n          .then((updatedPatient) => {\n            this.setPatient(updatedPatient)\n            this.$notification.success({\n              message: 'Patient erfolgreich aktualisiert',\n              description: '',\n            })\n            this.form.resetFields()\n            this.$emit('create')\n          })\n          .catch((error: Error) => {\n            this.$notification.error({\n              message: 'Patient konnte nicht aktualisiert werden.',\n              description: error.message,\n            })\n          })\n      })\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}