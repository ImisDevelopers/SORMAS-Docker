{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePasswordForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePasswordForm.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgYXV0aE1hcHBlciB9IGZyb20gJ0Avc3RvcmUvbW9kdWxlcy9hdXRoLm1vZHVsZScKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdBY2NvdW50JywKICBwcm9wczogWyd2aXNpYmxlJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYW5nZVBhc3N3b3JkRm9ybTogdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsKICAgICAgICBuYW1lOiAnY2hhbmdlX3Bhc3N3b3JkJywKICAgICAgfSksCiAgICAgIHBhc3N3b3JkUmV0cnk6IHt9LAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4uYXV0aE1hcHBlci5tYXBBY3Rpb25zKHsKICAgICAgY2hhbmdlUGFzc3dvcmQ6ICdjaGFuZ2VQYXNzd29yZCcsCiAgICB9KSwKICAgIGhhbmRsZUNoYW5nZVBhc3N3b3JkKCkgewogICAgICB0aGlzLmNoYW5nZVBhc3N3b3JkRm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyOiBhbnksIHZhbHVlczogYW55KSA9PiB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgY29uc29sZS53YXJuKGVycikKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICB0aGlzLmNoYW5nZVBhc3N3b3JkKHsKICAgICAgICAgIC4uLnZhbHVlcywKICAgICAgICB9KQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRub3RpZmljYXRpb24uc3VjY2Vzcyh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ1Bhc3N3b3J0IGVyZm9sZ3JlaWNoIGdlw6RuZGVydCcsCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmNoYW5nZVBhc3N3b3JkRm9ybS5yZXNldEZpZWxkcygpCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NyZWF0ZScpCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHsKICAgICAgICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnUGFzc3dvcnQga29ubnRlIG5pY2h0IGdlw6RuZGVydCB3ZXJkZW4uJywKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSwKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUGFzc3dvcmRSZXRyeUNoYW5nZU5ldyhpbnB1dDogYW55KSB7CiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkUmV0cnkgPSB0aGlzLmNoYW5nZVBhc3N3b3JkRm9ybS5nZXRGaWVsZFZhbHVlKAogICAgICAgICduZXdQYXNzd29yZFJldHJ5JwogICAgICApCiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkID0gaW5wdXQudGFyZ2V0LnZhbHVlCiAgICAgIHRoaXMuaGFuZGxlUGFzc3dvcmRSZXRyeUNoYW5nZShuZXdQYXNzd29yZCwgbmV3UGFzc3dvcmRSZXRyeSkKICAgIH0sCiAgICBoYW5kbGVQYXNzd29yZFJldHJ5Q2hhbmdlTmV3UmV0cnkoaW5wdXQ6IGFueSkgewogICAgICBjb25zdCBuZXdQYXNzd29yZFJldHJ5ID0gaW5wdXQudGFyZ2V0LnZhbHVlCiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkID0gdGhpcy5jaGFuZ2VQYXNzd29yZEZvcm0uZ2V0RmllbGRWYWx1ZSgnbmV3UGFzc3dvcmQnKQogICAgICB0aGlzLmhhbmRsZVBhc3N3b3JkUmV0cnlDaGFuZ2UobmV3UGFzc3dvcmQsIG5ld1Bhc3N3b3JkUmV0cnkpCiAgICB9LAogICAgaGFuZGxlUGFzc3dvcmRSZXRyeUNoYW5nZShuZXdQYXNzd29yZDogc3RyaW5nLCBuZXdQYXNzd29yZFJldHJ5OiBzdHJpbmcpIHsKICAgICAgdGhpcy5wYXNzd29yZFJldHJ5ID0KICAgICAgICBuZXdQYXNzd29yZCA9PT0gbmV3UGFzc3dvcmRSZXRyeQogICAgICAgICAgPyB7CiAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBlcnJvck1zZzogbnVsbCwKICAgICAgICAgICAgfQogICAgICAgICAgOiB7CiAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6ICdlcnJvcicsCiAgICAgICAgICAgICAgZXJyb3JNc2c6ICdQYXNzd8O2cnRlciBzdGltbWVuIG5pY2h0IMO8YmVyZWluJywKICAgICAgICAgICAgfQogICAgfSwKICB9LAp9KQo="},{"version":3,"sources":["ChangePasswordForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePasswordForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-modal\n    :visible=\"visible\"\n    title=\"Passwort ändern\"\n    okText=\"Passwort ändern\"\n    @cancel=\"\n      () => {\n        $emit('cancel')\n      }\n    \"\n    @ok=\"handleChangePassword\"\n  >\n    <a-form :form=\"changePasswordForm\" :layout=\"'vertical'\">\n      <a-form-item label=\"Altes Passwort\">\n        <a-input\n          v-decorator=\"['oldPassword', { rules: [{ required: true }] }]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"Neues Passwort\">\n        <a-input\n          @change=\"handlePasswordRetryChangeNew\"\n          type=\"password\"\n          v-decorator=\"['newPassword', { rules: [{ required: true }] }]\"\n        />\n      </a-form-item>\n      <a-form-item\n        label=\"Neues Passwort wiederholen\"\n        :help=\"passwordRetry.errorMsg\"\n        :validate-status=\"passwordRetry.validateStatus\"\n      >\n        <a-input\n          @change=\"handlePasswordRetryChangeNewRetry\"\n          type=\"password\"\n          v-decorator=\"['newPasswordRetry', { rules: [{ required: true }] }]\"\n        />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { authMapper } from '@/store/modules/auth.module'\n\nexport default Vue.extend({\n  name: 'Account',\n  props: ['visible'],\n  data() {\n    return {\n      changePasswordForm: this.$form.createForm(this, {\n        name: 'change_password',\n      }),\n      passwordRetry: {},\n    }\n  },\n  methods: {\n    ...authMapper.mapActions({\n      changePassword: 'changePassword',\n    }),\n    handleChangePassword() {\n      this.changePasswordForm.validateFields((err: any, values: any) => {\n        if (err) {\n          console.warn(err)\n          return\n        }\n        this.changePassword({\n          ...values,\n        })\n          .then(() => {\n            this.$notification.success({\n              message: 'Passwort erfolgreich geändert',\n              description: '',\n            })\n            this.changePasswordForm.resetFields()\n            this.$emit('create')\n          })\n          .catch((error: Error) => {\n            this.$notification.error({\n              message: 'Passwort konnte nicht geändert werden.',\n              description: error.message,\n            })\n          })\n      })\n    },\n    handlePasswordRetryChangeNew(input: any) {\n      const newPasswordRetry = this.changePasswordForm.getFieldValue(\n        'newPasswordRetry'\n      )\n      const newPassword = input.target.value\n      this.handlePasswordRetryChange(newPassword, newPasswordRetry)\n    },\n    handlePasswordRetryChangeNewRetry(input: any) {\n      const newPasswordRetry = input.target.value\n      const newPassword = this.changePasswordForm.getFieldValue('newPassword')\n      this.handlePasswordRetryChange(newPassword, newPasswordRetry)\n    },\n    handlePasswordRetryChange(newPassword: string, newPasswordRetry: string) {\n      this.passwordRetry =\n        newPassword === newPasswordRetry\n          ? {\n              validateStatus: 'success',\n              errorMsg: null,\n            }\n          : {\n              validateStatus: 'error',\n              errorMsg: 'Passwörter stimmen nicht überein',\n            }\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}