{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgZ2V0UGx6cywgUGx6IH0gZnJvbSAnQC91dGlsL3Bsei1zZXJ2aWNlJwoKZXhwb3J0IGludGVyZmFjZSBTdGF0ZSB7CiAgcGx6czogUGx6W10KICBjdXJyZW50U2VhcmNoOiBzdHJpbmcKfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1BseklucHV0JywKICBwcm9wczogWydkZWNvcmF0b3InLCAnZm9ybSddLAogIGRhdGEoKTogU3RhdGUgewogICAgcmV0dXJuIHsKICAgICAgcGx6czogW10sCiAgICAgIGN1cnJlbnRTZWFyY2g6ICcnLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaGFuZGxlUGx6U2VhcmNoKHZhbHVlOiBzdHJpbmcpIHsKICAgICAgdGhpcy5jdXJyZW50U2VhcmNoID0gdmFsdWUKICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPCAyKSB7CiAgICAgICAgdGhpcy5wbHpzID0gW10KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRQbHpzKHZhbHVlKQogICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWFyY2ggIT09IHZhbHVlKSB7CiAgICAgICAgICAvLyBJZiBhIHJlcXVlc3QgdGFrZXMgbG9uZ2VyLCB0aGlzIHJlcXVlc3QgbWlnaHQgYmUgb3V0ZGF0ZWQgc2luY2UgdGhlIHVzZXIgYWxyZWFkeSBjaGFuZ2VkIHRoZSBpbnB1dAogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB0aGlzLnNldFBMWihyZXN1bHRbMF0pCiAgICAgICAgICB0aGlzLnBsenMgPSBbXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBsenMgPSByZXN1bHQKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVQbHpTZWxlY3Rpb24odmFsdWU6IHN0cmluZykgewogICAgICBjb25zdCBwbHogPSB0aGlzLnBsenMuZmluZCgocGx6KSA9PiBwbHouZmllbGRzLnBseiA9PT0gdmFsdWUpCiAgICAgIGlmIChwbHopIHsKICAgICAgICB0aGlzLnNldFBMWihwbHopCiAgICAgIH0KICAgIH0sCiAgICBzZXRQTFoocGx6OiBQbHopIHsKICAgICAgdGhpcy4kZW1pdCgncGx6Q2hhbmdlZCcsIHBseikKICAgICAgcGx6LmZpZWxkcy5ub3RlID0gJycgLy8gU28gY2l0eSBkb2VzIG5vdCBkaXNwbGF5IGluIHBseiBpbnB1dAogICAgfSwKICB9LAp9KQo="},{"version":3,"sources":["PlzInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PlzInput.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-form-item label=\"PLZ\">\n    <a-auto-complete\n      @search=\"handlePlzSearch\"\n      @select=\"handlePlzSelection\"\n      v-decorator=\"decorator\"\n    >\n      <template slot=\"dataSource\">\n        <a-select-option :key=\"plz.fields.plz\" v-for=\"plz in plzs\">\n          {{ plz.fields.plz }} {{ plz.fields.note }}\n        </a-select-option>\n      </template>\n    </a-auto-complete>\n  </a-form-item>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { getPlzs, Plz } from '@/util/plz-service'\n\nexport interface State {\n  plzs: Plz[]\n  currentSearch: string\n}\n\nexport default Vue.extend({\n  name: 'PlzInput',\n  props: ['decorator', 'form'],\n  data(): State {\n    return {\n      plzs: [],\n      currentSearch: '',\n    }\n  },\n  methods: {\n    async handlePlzSearch(value: string) {\n      this.currentSearch = value\n      if (!value || value.length < 2) {\n        this.plzs = []\n      } else {\n        const result = await getPlzs(value)\n        if (this.currentSearch !== value) {\n          // If a request takes longer, this request might be outdated since the user already changed the input\n          return\n        }\n        if (result.length === 1) {\n          this.setPLZ(result[0])\n          this.plzs = []\n        } else {\n          this.plzs = result\n        }\n      }\n    },\n    handlePlzSelection(value: string) {\n      const plz = this.plzs.find((plz) => plz.fields.plz === value)\n      if (plz) {\n        this.setPLZ(plz)\n      }\n    },\n    setPLZ(plz: Plz) {\n      this.$emit('plzChanged', plz)\n      plz.fields.note = '' // So city does not display in plz input\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}