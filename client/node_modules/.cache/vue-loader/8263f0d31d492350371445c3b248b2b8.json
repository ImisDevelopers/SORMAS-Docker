{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientStammdaten.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientStammdaten.vue","mtime":1586713315430},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBQbHogfSBmcm9tICdAL3V0aWwvcGx6LXNlcnZpY2UnCmltcG9ydCB7IFJpc2tPY2N1cGF0aW9uIH0gZnJvbSAnQC9tb2RlbHMnCmltcG9ydCB7IFJJU0tfT0NDVVBBVElPTlMsIFJpc2tPY2N1cGF0aW9uT3B0aW9uIH0gZnJvbSAnQC9tb2RlbHMvcmlzay1vY2N1cGF0aW9uJwppbXBvcnQgRGF0ZUlucHV0IGZyb20gJ0AvY29tcG9uZW50cy9EYXRlSW5wdXQudnVlJwppbXBvcnQgUGx6SW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL1BseklucHV0LnZ1ZScKCi8qKgogKiBBdXRvY29tcGxldGUgZm9yIFBhdGllbnRzCiAqCiAqIHByb3BzOgogKiAtIHZhbGlkYXRpb246IHB1dCBpbiB2LWRlY29yYXRvciBvYmplY3QKICovCgpleHBvcnQgaW50ZXJmYWNlIFN0YXRlIHsKICBwbHpzOiBQbHpbXTsKICBkaXNhYmxlT2NjdXBhdGlvbjogYm9vbGVhbjsKICByaXNrT2NjdXBhdGlvbnM6IFJpc2tPY2N1cGF0aW9uT3B0aW9uW107CiAgc2hvd0RhdGVPZkRlYXRoOiBib29sZWFuOwp9CgpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAnUGF0aWVudFN0YW1tZGF0ZW4nLAogIHByb3BzOiBbJ2Zvcm0nLCAnc2hvd1N0YXknLCAnc2hvd0RlYXRoJ10sCiAgZGF0YSgpOiBTdGF0ZSB7CiAgICByZXR1cm4gewogICAgICBwbHpzOiBbXSwKICAgICAgZGlzYWJsZU9jY3VwYXRpb246IHRydWUsCiAgICAgIHJpc2tPY2N1cGF0aW9uczogUklTS19PQ0NVUEFUSU9OUywKICAgICAgc2hvd0RhdGVPZkRlYXRoOiBmYWxzZSwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIERhdGVJbnB1dCwKICAgIFBseklucHV0LAogIH0sCiAgbWV0aG9kczogewogICAgc2V0U3RheVBMWihwbHo6IFBseikgewogICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUoewogICAgICAgIHN0YXlaaXA6IHBsei5maWVsZHMucGx6LAogICAgICAgIHN0YXlDaXR5OiBwbHouZmllbGRzLm5vdGUsCiAgICAgIH0pCiAgICAgIGxldCBuZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29vcmRpbmF0ZWRfZW1haWwnKQogICAgICBpZiAoIW5leHRJbnB1dCkgewogICAgICAgIG5leHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpCiAgICAgIH0KICAgICAgaWYgKG5leHRJbnB1dCkgewogICAgICAgIG5leHRJbnB1dC5mb2N1cygpCiAgICAgIH0KICAgIH0sCiAgICBzZXRQTFoocGx6OiBQbHopIHsKICAgICAgdGhpcy5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICB6aXA6IHBsei5maWVsZHMucGx6LAogICAgICAgIGNpdHk6IHBsei5maWVsZHMubm90ZSwKICAgICAgfSkKICAgICAgbGV0IG5leHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb29yZGluYXRlZF9lbWFpbCcpCiAgICAgIGlmICghbmV4dElucHV0KSB7CiAgICAgICAgbmV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykKICAgICAgfQogICAgICBpZiAobmV4dElucHV0KSB7CiAgICAgICAgbmV4dElucHV0LmZvY3VzKCkKICAgICAgfQogICAgfSwKICAgIHJpc2tPY2N1cGF0aW9uU2VsZWN0ZWQodmFsdWU6IFJpc2tPY2N1cGF0aW9uKSB7CiAgICAgIHRoaXMuZGlzYWJsZU9jY3VwYXRpb24gPSB2YWx1ZSAhPT0gJ05PX1JJU0tfT0NDVVBBVElPTicKICAgICAgbGV0IG9jY3VwYXRpb24KICAgICAgaWYgKHRoaXMuZGlzYWJsZU9jY3VwYXRpb24pIHsKICAgICAgICBvY2N1cGF0aW9uID0gdGhpcy5yaXNrT2NjdXBhdGlvbnMuZmluZChyaXNrT2NjdXBhdGlvbiA9PiByaXNrT2NjdXBhdGlvbi52YWx1ZSA9PT0gdmFsdWUpPy5sYWJlbCB8fCAnJwogICAgICB9CiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7CiAgICAgICAgb2NjdXBhdGlvbjogb2NjdXBhdGlvbiwKICAgICAgfSkKICAgIH0sCiAgICBnZW5kZXJTZWxlY3RlZChldmVudDogRXZlbnQpIHsKICAgICAgY29uc3QgZ2VuZGVyID0gKGV2ZW50LnRhcmdldCBhcyBhbnkpLnZhbHVlCiAgICAgIHRoaXMuJGVtaXQoJ2dlbmRlcicsIGdlbmRlcikKICAgIH0sCiAgICBkaWVkQ2hhbmdlZChldmVudDogRXZlbnQpIHsKICAgICAgdGhpcy5zaG93RGF0ZU9mRGVhdGggPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkudmFsdWUKICAgIH0sCiAgfSwKfSkK"},{"version":3,"sources":["PatientStammdaten.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8OA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PatientStammdaten.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"data-form\">\n    <div>\n\n      <!-- Vorname / Nachname -->\n      <p style=\"text-align: center\">Allgemeine Angaben:</p>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Titel\">\n            <a-input v-decorator=\"['title']\" />\n          </a-form-item>\n        </a-col>\n      </a-row>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Vorname\">\n            <a-input\n              v-decorator=\"['firstName', { rules: [{\n                        required: true,\n                        message: 'Bitte Vornamen eingeben',\n                      }]}]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Nachname\">\n            <a-input\n              v-decorator=\"['lastName', { rules: [{\n                        required: true,\n                        message: 'Bitte Nachnamen eingeben'\n                      }]}]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Geschlecht / Geburtsdatum -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Geschlecht\">\n            <a-radio-group\n              v-decorator=\"['gender', { rules: [{\n                        required: true,\n                        message: 'Bitte Geschlecht eingeben',\n                      }]}]\"\n              @change=\"genderSelected\"\n              buttonStyle=\"solid\"\n            >\n              <a-radio value=\"male\">Männl.</a-radio>\n              <a-radio value=\"female\">Weibl.</a-radio>\n              <a-radio value=\"divers\">Div.</a-radio>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <DateInput label=\"Geburtsdatum\" :decorator=\"['dateOfBirth', { rules: [{\n                        required: true,\n                        message: 'Bitte Geburtsdatum eingeben',\n                      }]}]\" />\n        </a-col>\n      </a-row>\n\n      <a-row v-if=\"showDeath\">\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Verstorben\">\n            <a-radio-group v-decorator=\"['died', { rules: [{\n                        required: true,\n                        message: 'Bitte Status angeben',\n                      }], initialValue: false }]\" @change=\"diedChanged\">\n              <a-radio :value=\"true\">Ja</a-radio>\n              <a-radio :value=\"false\">Nein</a-radio>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <DateInput label=\"Todesdatum\" :decorator=\"['dateOfDeath']\" :disabled=\"!showDateOfDeath\" />\n        </a-col>\n      </a-row>\n\n      <a-divider />\n      <p style=\"text-align: center\">Adresse:</p>\n      <!-- Straße / Hausnummer -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Straße\">\n            <a-input\n              v-decorator=\"['street', { rules: [{\n                        required: true,\n                        message: 'Bitte Straße eingeben',\n                      }] }]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Hausnummer\">\n            <a-input\n              v-decorator=\"['houseNumber', { rules: [{\n                        required: true,\n                        message: 'Bitte Hausnummer eingeben',\n                      }]}]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- PLZ / Ort -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <PlzInput :decorator=\"['zip', { rules: [{\n              required: true,\n              message: 'Bitte PLZ eingeben',\n            }]}]\" @plzChanged=\"setPLZ\" />\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Ort\">\n            <a-input v-decorator=\"['city', { rules: [{\n              required: true,\n              message: 'Bitte Ort eingeben',\n            }] }]\" />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Aufenthaltsort -->\n      <div v-if=\"showStay\">\n        <a-divider />\n        <p style=\"text-align: center\">Aufenthaltsort, falls von Adresse abweichend:</p>\n        <!-- Straße / Hausnummer -->\n        <a-row>\n          <a-col :lg=\"12\" :sm=\"24\">\n            <a-form-item label=\"Straße\">\n              <a-input\n                v-decorator=\"['stayStreet']\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :lg=\"12\" :sm=\"24\">\n            <a-form-item label=\"Hausnummer\">\n              <a-input\n                v-decorator=\"['stayHouseNumber']\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n\n        <!-- PLZ / Ort -->\n        <a-row>\n          <a-col :lg=\"12\" :sm=\"24\">\n            <PlzInput :decorator=\"['stayZip']\" @plzChanged=\"setStayPLZ\" />\n          </a-col>\n          <a-col :lg=\"12\" :sm=\"24\">\n            <a-form-item label=\"Ort\">\n              <a-input\n                v-decorator=\"['stayCity']\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </div>\n\n      <!-- Email / Telefon -->\n      <a-divider />\n      <p style=\"text-align: center\">Kontakt und Sonstiges:</p>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"E-mail\">\n            <a-input\n              v-decorator=\"['email', { rules: [{\n                        required: true,\n                        message: 'Bitte Email eingeben',\n                      }] }]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Telefon\">\n            <a-input\n              v-decorator=\"[\n                      'phoneNumber',\n                      { rules: [{\n                        required: true,\n                        message: 'Bitte Telefonnummer eingeben',\n                      }]}\n                    ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Beruf / Arbeitgeber -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Beruf\">\n            <div>\n              <a-select v-decorator=\"['riskOccupation', { rules: [{\n                        required: true,\n                        message: 'Bitte Beruf eingeben',\n                      }]}]\" @select=\"riskOccupationSelected\">\n                <a-select-option v-for=\"riskOccupation in riskOccupations\" :key=\"riskOccupation.value\">\n                  {{riskOccupation.label}}\n                </a-select-option>\n              </a-select>\n              <a-input\n                :disabled=\"disableOccupation\"\n                v-decorator=\"['occupation', { rules: [{\n                        required: true,\n                        message: 'Bitte Beruf eingeben',\n                      }]}]\"\n              />\n            </div>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Arbeitgeber (optional)\">\n            <a-input v-decorator=\"['employer']\" />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Krankenkasse / Versichertennr -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Krankenkasse (optional)\">\n            <a-input v-decorator=\"['insuranceCompany']\" />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Versichertennr. (optional)\">\n            <a-input v-decorator=\"['insuranceMembershipNumber']\" />\n          </a-form-item>\n        </a-col>\n      </a-row>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport Vue from 'vue'\nimport { Plz } from '@/util/plz-service'\nimport { RiskOccupation } from '@/models'\nimport { RISK_OCCUPATIONS, RiskOccupationOption } from '@/models/risk-occupation'\nimport DateInput from '@/components/DateInput.vue'\nimport PlzInput from '@/components/PlzInput.vue'\n\n/**\n * Autocomplete for Patients\n *\n * props:\n * - validation: put in v-decorator object\n */\n\nexport interface State {\n  plzs: Plz[];\n  disableOccupation: boolean;\n  riskOccupations: RiskOccupationOption[];\n  showDateOfDeath: boolean;\n}\n\nexport default Vue.extend({\n  name: 'PatientStammdaten',\n  props: ['form', 'showStay', 'showDeath'],\n  data(): State {\n    return {\n      plzs: [],\n      disableOccupation: true,\n      riskOccupations: RISK_OCCUPATIONS,\n      showDateOfDeath: false,\n    }\n  },\n  components: {\n    DateInput,\n    PlzInput,\n  },\n  methods: {\n    setStayPLZ(plz: Plz) {\n      this.form.setFieldsValue({\n        stayZip: plz.fields.plz,\n        stayCity: plz.fields.note,\n      })\n      let nextInput = document.getElementById('coordinated_email')\n      if (!nextInput) {\n        nextInput = document.getElementById('email')\n      }\n      if (nextInput) {\n        nextInput.focus()\n      }\n    },\n    setPLZ(plz: Plz) {\n      this.form.setFieldsValue({\n        zip: plz.fields.plz,\n        city: plz.fields.note,\n      })\n      let nextInput = document.getElementById('coordinated_email')\n      if (!nextInput) {\n        nextInput = document.getElementById('email')\n      }\n      if (nextInput) {\n        nextInput.focus()\n      }\n    },\n    riskOccupationSelected(value: RiskOccupation) {\n      this.disableOccupation = value !== 'NO_RISK_OCCUPATION'\n      let occupation\n      if (this.disableOccupation) {\n        occupation = this.riskOccupations.find(riskOccupation => riskOccupation.value === value)?.label || ''\n      }\n      this.form.setFieldsValue({\n        occupation: occupation,\n      })\n    },\n    genderSelected(event: Event) {\n      const gender = (event.target as any).value\n      this.$emit('gender', gender)\n    },\n    diedChanged(event: Event) {\n      this.showDateOfDeath = (event.target as any).value\n    },\n  },\n})\n</script>\n\n<style scoped>\n</style>\n"]}]}