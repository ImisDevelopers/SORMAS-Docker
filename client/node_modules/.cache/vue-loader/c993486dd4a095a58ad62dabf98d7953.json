{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterInstitution.vue?vue&type=style&index=0&id=2a9a3655&scoped=true&lang=css&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/RegisterInstitution.vue","mtime":1586713315433},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/css-loader/dist/cjs.js","mtime":1584795993125},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584795993380},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/postcss-loader/src/index.js","mtime":1584795993354},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLndyYXBwZXIgewogIHRleHQtYWxpZ246IGxlZnQ7CiAgcGFkZGluZzogMiU7CiAgd2lkdGg6IDEwMCU7Cn0KCi5kYXRhLXByb2Nlc3Npbmctbm90LXNlbGVjdGVkIHsKICBjb2xvcjogcmVkOwp9CgoubG9naW4taGVhZGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQo="},{"version":3,"sources":["RegisterInstitution.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"RegisterInstitution.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div v-if=\"!createdInstitution\">\n      <a-card style=\"margin: 3rem auto; max-width: 860px\">\n        <div class=\"login-header\">\n          <img\n            src=\"../assets/logo.png\"\n            height=\"100\"\n          />\n          <h3>\n            Registrieren Sie hier eine neue Instutition in IMIS.\n          </h3>\n        </div>\n\n        <a-form\n          :form=\"form\"\n          :layout=\"'horizontal'\"\n          :labelCol=\"{ span: 6 }\"\n          :wrapperCol=\"{ span: 18}\"\n          @submit.prevent=\"handleSubmit\"\n        >\n          <a-row>\n            <a-col :span=\"24\">\n              <a-form-item label=\"Benutzername\">\n                <a-input v-decorator=\"['username', { rules: [{ required: true }] }]\">\n                  <a-icon slot=\"prefix\" type=\"user\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"24\">\n              <a-form-item label=\"Passwort\">\n                <a-input v-decorator=\"['password', { rules: [{ required: true }] }]\" type=\"password\">\n                  <a-icon slot=\"prefix\" type=\"lock\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"24\">\n              <a-form-item label=\"Passwort wiederholen\" has-feedback\n                           :validate-status=\"passwordRepeat.validateStatus\"\n                           :help=\"passwordRepeat.errorMsg\"\n              >\n                <a-input v-decorator=\"['password-repeat', { rules: [{ required: true }] }]\"\n                         @change=\"handlePasswordRepeatChange\" type=\"password\">\n                  <a-icon slot=\"prefix\" type=\"lock\" />\n                </a-input>\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-divider></a-divider>\n          <a-row>\n            <a-col :md=\"12\">\n              <a-form-item label=\"Typ\">\n                <a-select\n                  v-decorator=\"['institutionType', { rules: [{\n                                          required: true,\n                                          message: 'Please select your institution type!'\n                                        }]}]\"\n                  placeholder=\"Bitte wählen...\"\n                >\n                  <a-select-option value=\"LABORATORY\">Labor</a-select-option>\n                  <a-select-option value=\"DOCTORS_OFFICE\">Arztpraxis</a-select-option>\n                  <a-select-option value=\"CLINIC\">Klinik</a-select-option>\n                  <a-select-option value=\"TEST_SITE\">Teststelle</a-select-option>\n                </a-select>\n              </a-form-item>\n              <a-form-item label=\"Name\">\n                <a-input\n                  v-decorator=\"['name', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Straße\">\n                <a-input\n                  v-decorator=\"['street', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Hausnr.\">\n                <a-input\n                  v-decorator=\"['houseNumber', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"12\">\n              <a-form-item label=\"PLZ\">\n                <a-input\n                  v-decorator=\"['zip', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Ort\">\n                <a-input\n                  v-decorator=\"['city', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"E-mail\">\n                <a-input\n                  v-decorator=\"['email', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n              <a-form-item label=\"Telefon\">\n                <a-input\n                  v-decorator=\"['phoneNumber', { rules: [{ required: true }] }]\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col>\n              <a-form-item\n                label=\"Anmerkungen\"\n                :labelCol=\"{ span: 24}\"\n                :wrapperCol=\"{ span: 24}\"\n              >\n                <a-input v-decorator=\"['comment']\" />\n              </a-form-item>\n            </a-col>\n            <a-col :xs=\"6\" :md=\"3\"></a-col>\n            <a-col>\n              <!-- Datenschutzerklärung Bestätigung-->\n              <a-form-item>\n                <a-checkbox @change=\"onCheck\">\n                                  <span :class=\"dataProcessingClass\">\n                                    Ich erkläre mich mit der Übermittlung dieser Daten zur weiteren\n                                    Verarbeitung einverstanden.\n                                  </span>\n                </a-checkbox>\n              </a-form-item>\n            </a-col>\n            <a-col>\n              <!-- Submit Button -->\n              <a-form-item :wrapperCol=\"{ span: 24, offset: 0 }\">\n                <a-row :gutter=\"16\" type=\"flex\" justify=\"end\">\n                  <a-col>\n                    <a-button type=\"primary\" html-type=\"submit\">\n                      Registrieren\n                    </a-button>\n                  </a-col>\n                </a-row>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-form>\n      </a-card>\n    </div>\n    <div v-else>\n      <div>Die Institution wurde erfolgreich registriert.</div>\n      <br />\n      <div>Die Instituions ID lautet: {{ createdInstitution.id }}</div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport Api from '@/api'\n\nfunction validatePasswordRepeat(password: string, passwordRepeat: string) {\n  if (password === passwordRepeat) {\n    return {\n      validateStatus: 'success',\n      errorMsg: null,\n    }\n  }\n  return {\n    validateStatus: 'error',\n    errorMsg: 'Passwörter stimmen nicht überein',\n  }\n}\n\nexport default Vue.extend({\n  name: 'RegisterInstitutionPage',\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'coordinated' }),\n      createdInstitution: null,\n      dataProcessingClass: '',\n      checked: false,\n      passwordRepeat: {},\n    }\n  },\n  methods: {\n    onCheck(e: any) {\n      this.checked = e.target.checked\n    },\n    // For Explanation of dynamic form validation\n    // see https://www.antdv.com/components/form/#components-form-demo-handle-form-data-manually\n    handlePasswordRepeatChange(event: any) {\n      this.passwordRepeat = validatePasswordRepeat(this.form.getFieldValue('password'), event.target.value)\n    },\n    handleSubmit() {\n      this.form.validateFields((err: any, values: any) => {\n        if (!this.checked) {\n          this.dataProcessingClass = 'data-processing-not-selected'\n          return\n        } else if (err) {\n          console.error(err)\n          return\n        }\n\n        values = {\n          ...values,\n          user: {\n            username: values.username,\n            password: values.password,\n            userRole: 'USER_ROLE_ADMIN',\n          },\n        }\n        Api.api.registerInstitutionUsingPost(values).then(() => {\n          this.form.resetFields()\n          const notification = {\n            message: 'Institution registriert.',\n            description: 'Die Institution wurde erfolgreich registriert.',\n          }\n          this.$notification.success(notification)\n          this.$store.dispatch('authModule/login', {\n            username: values.username,\n            password: values.password,\n          })\n        }).catch(err => {\n          const notification = {\n            message: 'Fehler beim Registrieren der Institution.',\n            description: err.message,\n          }\n          this.$notification.error(notification)\n        })\n      })\n    },\n  },\n})\n</script>\n\n<style scoped>\n  .wrapper {\n    text-align: left;\n    padding: 2%;\n    width: 100%;\n  }\n\n  .data-processing-not-selected {\n    color: red;\n  }\n\n  .login-header {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n</style>\n"]}]}