{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientStammdaten.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientStammdaten.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgUmlza09jY3VwYXRpb24gfSBmcm9tICdAL21vZGVscycKaW1wb3J0IHsKICBSSVNLX09DQ1VQQVRJT05TLAogIFJpc2tPY2N1cGF0aW9uT3B0aW9uLAp9IGZyb20gJ0AvbW9kZWxzL3Jpc2stb2NjdXBhdGlvbicKaW1wb3J0IERhdGVJbnB1dCBmcm9tICdAL2NvbXBvbmVudHMvRGF0ZUlucHV0LnZ1ZScKaW1wb3J0IExvY2F0aW9uRm9ybUdyb3VwIGZyb20gJ0AvY29tcG9uZW50cy9Mb2NhdGlvbkZvcm1Hcm91cC52dWUnCmltcG9ydCBQbHpJbnB1dCBmcm9tICdAL2NvbXBvbmVudHMvUGx6SW5wdXQudnVlJwppbXBvcnQgeyBQYXRpZW50IH0gZnJvbSAnQC9hcGkvU3dhZ2dlckFwaScKaW1wb3J0IG1vbWVudCwgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnCgovKioKICogQXV0b2NvbXBsZXRlIGZvciBQYXRpZW50cwogKgogKiBwcm9wczoKICogLSB2YWxpZGF0aW9uOiBwdXQgaW4gdi1kZWNvcmF0b3Igb2JqZWN0CiAqLwoKZXhwb3J0IGludGVyZmFjZSBTdGF0ZSB7CiAgZGlzYWJsZU9jY3VwYXRpb246IGJvb2xlYW4KICByaXNrT2NjdXBhdGlvbnM6IFJpc2tPY2N1cGF0aW9uT3B0aW9uW10KICBzaG93RGF0ZU9mRGVhdGg6IGJvb2xlYW4KICBwYXRpZW50SW5wdXQ6IFBhdGllbnQKICBpbml0aWFsRGF0ZU9mQmlydGg6IE1vbWVudCB8IHVuZGVmaW5lZAogIGluaXRpYWxEYXRlT2ZEZWF0aDogTW9tZW50IHwgdW5kZWZpbmVkCiAgaW5pdGlhbFJpc2tPY2N1cGF0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQKfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1BhdGllbnRTdGFtbWRhdGVuJywKICBwcm9wczogWydmb3JtJywgJ3Nob3dTdGF5JywgJ3Nob3dEZWF0aCcsICdwYXRpZW50J10sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnBhdGllbnQpIHsKICAgICAgdGhpcy5wYXRpZW50SW5wdXQgPSB0aGlzLnBhdGllbnQKICAgICAgdGhpcy5pbml0aWFsRGF0ZU9mQmlydGggPSBtb21lbnQodGhpcy5wYXRpZW50SW5wdXQuZGF0ZU9mQmlydGgpCiAgICAgIGlmICh0aGlzLnBhdGllbnRJbnB1dC5kYXRlT2ZEZWF0aCkgewogICAgICAgIHRoaXMuaW5pdGlhbERhdGVPZkJpcnRoID0gbW9tZW50KHRoaXMucGF0aWVudElucHV0LmRhdGVPZkRlYXRoKQogICAgICB9CiAgICAgIHRoaXMuaW5pdGlhbFJpc2tPY2N1cGF0aW9uID0KICAgICAgICB0aGlzLnBhdGllbnRJbnB1dC5yaXNrT2NjdXBhdGlvbiB8fCAnTk9fUklTS19PQ0NVUEFUSU9OJwogICAgICB0aGlzLmRpc2FibGVPY2N1cGF0aW9uID0gZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKTogU3RhdGUgewogICAgcmV0dXJuIHsKICAgICAgZGlzYWJsZU9jY3VwYXRpb246IHRydWUsCiAgICAgIHJpc2tPY2N1cGF0aW9uczogUklTS19PQ0NVUEFUSU9OUywKICAgICAgc2hvd0RhdGVPZkRlYXRoOiBmYWxzZSwKICAgICAgcGF0aWVudElucHV0OiB7fSwKICAgICAgaW5pdGlhbERhdGVPZkJpcnRoOiB1bmRlZmluZWQsCiAgICAgIGluaXRpYWxEYXRlT2ZEZWF0aDogdW5kZWZpbmVkLAogICAgICBpbml0aWFsUmlza09jY3VwYXRpb246IHVuZGVmaW5lZCwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIERhdGVJbnB1dCwKICAgIExvY2F0aW9uRm9ybUdyb3VwLAogIH0sCiAgbWV0aG9kczogewogICAgcmlza09jY3VwYXRpb25TZWxlY3RlZCh2YWx1ZTogUmlza09jY3VwYXRpb24pIHsKICAgICAgdGhpcy5kaXNhYmxlT2NjdXBhdGlvbiA9IHZhbHVlICE9PSAnTk9fUklTS19PQ0NVUEFUSU9OJwogICAgICBsZXQgb2NjdXBhdGlvbgogICAgICBpZiAodGhpcy5kaXNhYmxlT2NjdXBhdGlvbikgewogICAgICAgIG9jY3VwYXRpb24gPQogICAgICAgICAgdGhpcy5yaXNrT2NjdXBhdGlvbnMuZmluZCgKICAgICAgICAgICAgKHJpc2tPY2N1cGF0aW9uKSA9PiByaXNrT2NjdXBhdGlvbi52YWx1ZSA9PT0gdmFsdWUKICAgICAgICAgICk/LmxhYmVsIHx8ICcnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3Qgb2NjdXBhdGlvbklucHV0ID0gKHRoaXMuJHJlZnMub2NjdXBhdGlvbiBhcyBWdWUpCiAgICAgICAgICAuJGVsIGFzIEhUTUxFbGVtZW50CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBvY2N1cGF0aW9uSW5wdXQuZm9jdXMoKQogICAgICAgIH0sIDApCiAgICAgIH0KICAgICAgdGhpcy5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICBvY2N1cGF0aW9uOiBvY2N1cGF0aW9uLAogICAgICB9KQogICAgfSwKICAgIGdlbmRlclNlbGVjdGVkKGV2ZW50OiBFdmVudCkgewogICAgICBjb25zdCBnZW5kZXIgPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkudmFsdWUKICAgICAgdGhpcy4kZW1pdCgnZ2VuZGVyJywgZ2VuZGVyKQogICAgfSwKICAgIGRpZWRDaGFuZ2VkKGV2ZW50OiBFdmVudCkgewogICAgICB0aGlzLnNob3dEYXRlT2ZEZWF0aCA9IChldmVudC50YXJnZXQgYXMgYW55KS52YWx1ZQogICAgfSwKICB9LAp9KQo="},{"version":3,"sources":["PatientStammdaten.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PatientStammdaten.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"data-form\">\n    <div>\n      <!-- Vorname / Nachname -->\n      <p style=\"text-align: center;\">Allgemeine Angaben:</p>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Titel\">\n            <a-input\n              v-decorator=\"['title', { initialValue: patientInput.title }]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Vorname\">\n            <a-input\n              v-decorator=\"[\n                'firstName',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Vornamen eingeben',\n                    },\n                  ],\n                  initialValue: patientInput.firstName,\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Nachname\">\n            <a-input\n              v-decorator=\"[\n                'lastName',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Nachnamen eingeben',\n                    },\n                  ],\n                  initialValue: patientInput.lastName,\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Geschlecht / Geburtsdatum -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Mediz. Geschlecht\">\n            <a-radio-group\n              @change=\"genderSelected\"\n              buttonStyle=\"solid\"\n              v-decorator=\"[\n                'gender',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Geschlecht eingeben',\n                    },\n                  ],\n                  initialValue: patientInput.gender,\n                },\n              ]\"\n            >\n              <a-radio value=\"male\">Männlich</a-radio>\n              <a-radio value=\"female\">Weiblich</a-radio>\n              <a-radio value=\"divers\">Divers</a-radio>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Geburtsdatum\">\n            <DateInput\n              v-decorator=\"[\n                'dateOfBirth',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Geburtsdatum eingeben',\n                    },\n                  ],\n                  initialValue: initialDateOfBirth,\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Staatsangehörigkeit -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Staatsangehörigkeit\">\n            <a-input\n              v-decorator=\"[\n                'nationality',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Staatsangehörigkeit angeben',\n                    },\n                  ],\n                  initialValue: patientInput.nationality || 'deutsch',\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <a-row v-if=\"showDeath\">\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Verstorben\">\n            <a-radio-group\n              @change=\"diedChanged\"\n              v-decorator=\"[\n                'died',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Status angeben',\n                    },\n                  ],\n                  initialValue: !!patientInput.dateOfDeath,\n                },\n              ]\"\n            >\n              <a-radio :value=\"true\">Ja</a-radio>\n              <a-radio :value=\"false\">Nein</a-radio>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Todesdatum\">\n            <DateInput\n              v-decorator=\"[\n                'dateOfDeath',\n                { initialValue: initialDateOfDeath },\n              ]\"\n              :disabled=\"!showDateOfDeath\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Wohnsitz -->\n      <a-divider />\n      <p style=\"text-align: center;\">Wohnort:</p>\n      <location-form-group :form=\"form\" :data=\"patient\" :required=\"true\" />\n\n      <!-- Aufenthaltsort -->\n      <div v-if=\"showStay\">\n        <a-divider />\n        <p style=\"text-align: center;\">\n          Aufenthaltsort, falls von Wohnort abweichend:\n        </p>\n        <location-form-group\n          :data=\"patient\"\n          :required=\"false\"\n          fieldNamePrefix=\"stay\"\n        />\n      </div>\n\n      <!-- Email / Telefon -->\n      <a-divider />\n      <p style=\"text-align: center;\">Kommunikation und Sonstiges:</p>\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"E-mail\">\n            <a-input\n              v-decorator=\"[\n                'email',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Email eingeben',\n                    },\n                  ],\n                  initialValue: patientInput.email,\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Telefon\">\n            <a-input\n              v-decorator=\"[\n                'phoneNumber',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Bitte Telefonnummer eingeben',\n                    },\n                  ],\n                  initialValue: patientInput.phoneNumber,\n                },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Beruf / Arbeitgeber -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Beruf\">\n            <div>\n              <a-select\n                @select=\"riskOccupationSelected\"\n                v-decorator=\"[\n                  'riskOccupation',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: 'Bitte Beruf eingeben',\n                      },\n                    ],\n                    initialValue: initialRiskOccupation,\n                  },\n                ]\"\n              >\n                <a-select-option\n                  :key=\"riskOccupation.value\"\n                  v-for=\"riskOccupation in riskOccupations\"\n                >\n                  {{ riskOccupation.label }}\n                </a-select-option>\n              </a-select>\n              <a-input\n                ref=\"occupation\"\n                :disabled=\"disableOccupation\"\n                v-decorator=\"[\n                  'occupation',\n                  {\n                    rules: [\n                      {\n                        message: 'Bitte Beruf eingeben',\n                      },\n                    ],\n                    initialValue: patientInput.occupation,\n                  },\n                ]\"\n              />\n            </div>\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Arbeitgeber (optional)\">\n            <a-input\n              v-decorator=\"[\n                'employer',\n                { initialValue: patientInput.employer },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n\n      <!-- Krankenkasse / Versichertennr -->\n      <a-row>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Krankenkasse (optional)\">\n            <a-input\n              v-decorator=\"[\n                'insuranceCompany',\n                { initialValue: patientInput.insuranceCompany },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :lg=\"12\" :sm=\"24\">\n          <a-form-item label=\"Versichertennr. (optional)\">\n            <a-input\n              v-decorator=\"[\n                'insuranceMembershipNumber',\n                { initialValue: patientInput.insuranceMembershipNumber },\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n      </a-row>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { RiskOccupation } from '@/models'\nimport {\n  RISK_OCCUPATIONS,\n  RiskOccupationOption,\n} from '@/models/risk-occupation'\nimport DateInput from '@/components/DateInput.vue'\nimport LocationFormGroup from '@/components/LocationFormGroup.vue'\nimport PlzInput from '@/components/PlzInput.vue'\nimport { Patient } from '@/api/SwaggerApi'\nimport moment, { Moment } from 'moment'\n\n/**\n * Autocomplete for Patients\n *\n * props:\n * - validation: put in v-decorator object\n */\n\nexport interface State {\n  disableOccupation: boolean\n  riskOccupations: RiskOccupationOption[]\n  showDateOfDeath: boolean\n  patientInput: Patient\n  initialDateOfBirth: Moment | undefined\n  initialDateOfDeath: Moment | undefined\n  initialRiskOccupation: string | undefined\n}\n\nexport default Vue.extend({\n  name: 'PatientStammdaten',\n  props: ['form', 'showStay', 'showDeath', 'patient'],\n  created() {\n    if (this.patient) {\n      this.patientInput = this.patient\n      this.initialDateOfBirth = moment(this.patientInput.dateOfBirth)\n      if (this.patientInput.dateOfDeath) {\n        this.initialDateOfBirth = moment(this.patientInput.dateOfDeath)\n      }\n      this.initialRiskOccupation =\n        this.patientInput.riskOccupation || 'NO_RISK_OCCUPATION'\n      this.disableOccupation = false\n    }\n  },\n  data(): State {\n    return {\n      disableOccupation: true,\n      riskOccupations: RISK_OCCUPATIONS,\n      showDateOfDeath: false,\n      patientInput: {},\n      initialDateOfBirth: undefined,\n      initialDateOfDeath: undefined,\n      initialRiskOccupation: undefined,\n    }\n  },\n  components: {\n    DateInput,\n    LocationFormGroup,\n  },\n  methods: {\n    riskOccupationSelected(value: RiskOccupation) {\n      this.disableOccupation = value !== 'NO_RISK_OCCUPATION'\n      let occupation\n      if (this.disableOccupation) {\n        occupation =\n          this.riskOccupations.find(\n            (riskOccupation) => riskOccupation.value === value\n          )?.label || ''\n      } else {\n        const occupationInput = (this.$refs.occupation as Vue)\n          .$el as HTMLElement\n        setTimeout(() => {\n          occupationInput.focus()\n        }, 0)\n      }\n      this.form.setFieldsValue({\n        occupation: occupation,\n      })\n    },\n    genderSelected(event: Event) {\n      const gender = (event.target as any).value\n      this.$emit('gender', gender)\n    },\n    diedChanged(event: Event) {\n      this.showDateOfDeath = (event.target as any).value\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}