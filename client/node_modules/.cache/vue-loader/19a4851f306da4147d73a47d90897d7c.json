{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/PublicRegister.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/PublicRegister.vue","mtime":1586713315433},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/css-loader/dist/cjs.js","mtime":1584795993125},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584795993380},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/postcss-loader/src/index.js","mtime":1584795993354},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/sass-loader/dist/cjs.js","mtime":1586724165268},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnB1YmxpYy1yZWdpc3Rlci1vdXRlci1jb250YWluZXIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgb3ZlcmZsb3c6IGF1dG87CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KAogICAgICByZ2JhKDAsIDAsIDAsIDAuMyksCiAgICAgIHJnYmEoMCwgMCwgMCwgMC4zKQogICksIHVybCgiLi4vYXNzZXRzL3dhdmUtYmcuc3ZnIik7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjg3KTsKCiAgLmJ1dHRvbi1yb3ctYnV0dG9uIHsKICAgIGJveC1zaGFkb3c6IDAgM3B4IDNweCAtMnB4IHJnYmEoMCwgMCwgMCwgLjIpLCAwIDNweCA0cHggMCByZ2JhKDAsIDAsIDAsIC4xNCksIDAgMXB4IDhweCAwIHJnYmEoMCwgMCwgMCwgLjEyKTsKICB9CgogIC5hbnQtZm9ybS1pdGVtLWNvbnRyb2wtd3JhcHBlciB7CiAgICB3aWR0aDogMTAwJTsKICB9CgogIC5kYXRhLWZvcm0gLmFudC1mb3JtLWl0ZW0tY29udHJvbC13cmFwcGVyIHsKICAgIHdpZHRoOiA2NiU7CiAgfQoKICAuY2hlY2tib3gtZ3JvdXAgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKCiAgICAuYW50LWNoZWNrYm94LWlubmVyIHsKICAgICAgd2lkdGg6IDMwcHg7CiAgICAgIGhlaWdodDogMzBweDsKICAgIH0KCiAgICAuYW50LWNoZWNrYm94LWlubmVyOjphZnRlciB7CiAgICAgIHdpZHRoOiA4cHg7CiAgICAgIGhlaWdodDogMTVweDsKICAgICAgdG9wOiA0OCU7CiAgICB9CgogICAgLmFudC1jaGVja2JveC13cmFwcGVyIHsKICAgICAgbWFyZ2luOiA1cHg7CiAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIH0KICB9CgogIC5hbnQtYnRuOmZvY3VzIHsKICAgIGJhY2tncm91bmQ6ICMxODkwZmYKICB9CgogIC5jYXJkIHsKICAgIG1heC13aWR0aDogODAlOwogICAgbWFyZ2luOiA0cmVtIGF1dG8gMCBhdXRvOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGJveC1zaGFkb3c6IDAgOHB4IDlweCAtNXB4IHJnYmEoMCwgMCwgMCwgLjIpLCAwIDE1cHggMjJweCAycHggcmdiYSgwLCAwLCAwLCAuMTQpLCAwIDZweCAyOHB4IDVweCByZ2JhKDAsIDAsIDAsIC4xMik7CiAgICBib3JkZXI6IG5vbmU7CiAgfQoKICBoMSB7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNzgpOwogIH0KCiAgaDIgewogICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTsKICAgIG1hcmdpbjogMzVweCAwIDI1cHggMDsKICB9CgogIC5idXR0b24tcm93IHsKICAgIGJhY2tncm91bmQ6IHJnYigyMTEsIDIxMSwgMjExKTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsKICAgIHBhZGRpbmc6IDEwcHggMDsKICAgIG1hcmdpbjogMTVweCAtMjRweCAtMjRweCAtMjRweDsKICAgIGJvcmRlci1yYWRpdXM6IDAgMCAxMHB4IDEwcHg7CiAgfQoKICBAbWVkaWEgKG1heC13aWR0aDogNzUwcHgpIHsKICAgIGgxIHsKICAgICAgZGlzcGxheTogbm9uZTsKICAgIH0KICAgIC5hbnQtc3RlcHMgewogICAgICBtaW4taGVpZ2h0OiAxcHg7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogICAgfQogICAgLmFudC1zdGVwcy1pdGVtLWNvbnRlbnQgewogICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuY2FyZCB7CiAgICAgIG1heC13aWR0aDogOTUlOwogICAgICBtYXJnaW46IDNyZW0gYXV0byAzcmVtIGF1dG87CiAgICB9CiAgICAuZGF0YS1mb3JtIC5hbnQtZm9ybS1pdGVtLWNvbnRyb2wtd3JhcHBlciB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgfQogIH0KCiAgQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkgewogICAgLmNhcmQgewogICAgICBtYXgtd2lkdGg6IDEwMDBweDsKICAgICAgbWFyZ2luOiAzcmVtIGF1dG8gM3JlbSBhdXRvOwogICAgfQogIH0KfQoK"},{"version":3,"sources":["PublicRegister.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PublicRegister.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"public-register-outer-container\">\n    <a-card class=\"card\">\n      <div style=\"display: flex; align-items: center; justify-content: center\">\n        <img\n          src=\"../assets/logo.png\"\n          aspect-ratio=\"1.7\"\n          style=\"vertical-align: middle; height: 100px; margin-right: 25px\"\n        />\n        <h1 style=\"margin: 0\">Selbstregistrierung</h1>\n      </div>\n      <div style=\"margin-top: 35px\">\n        <a-steps :current=\"current\" style=\"margin-bottom: 20px\">\n          <a-step v-for=\"item in steps\" :key=\"item.title\" :title=\"item.title\" />\n        </a-steps>\n\n        <a-form :form=\"form\" :layout=\"'horizontal'\"\n                :labelCol=\"{ sm: { span: 8 },  xs: { span: 24 }  }\"\n                :wrapperCol=\"{xs: { span: 24 }, sm: { span: 16 }}\">\n\n          <!-- Symptome -->\n          <div :style=\"{ display: current === 0 ? 'block' : 'none' }\">\n            <h2>Welche der folgenden Symptome hatten Sie in den letzten 24h?</h2>\n            <div style=\"display: flex\">\n              <span style=\"flex: 1 1 auto\" />\n              <div>\n                <a-form-item style=\"margin-bottom: 0\">\n                  <a-checkbox-group v-decorator=\"['symptoms']\" :options=\"symptoms\" class=\"checkbox-group\" />\n                </a-form-item>\n                <div class=\"checkbox-group\">\n                  <div style=\"display: flex; align-items: center; align-self: stretch\">\n                    <a-checkbox @change=\"symptomsChanged\">Andere:</a-checkbox>\n                    <a-form-item style=\"flex: 1 1 100%; margin-bottom: 0;\">\n                      <a-input v-decorator=\"['symptomsOther']\" :disabled=\"!showOtherSymptoms\" />\n                    </a-form-item>\n                  </div>\n                </div>\n              </div>\n              <span style=\"flex: 1 1 auto\" />\n            </div>\n          </div>\n\n          <!-- Exposition -->\n          <div :style=\"{ display: current === 1 ? 'block' : 'none' }\">\n            <h2>Welche Formen der Exposition treffen auf Sie zu?</h2>\n            <div style=\"display: flex\">\n              <span style=\"flex: 1 1 auto\" />\n              <div style=\"display: flex; flex-direction: column\">\n                <a-form-item>\n                  <a-checkbox-group v-decorator=\"['exposures']\" :options=\"exposures\" class=\"checkbox-group\"\n                                    @change=\"exposuresChanged\" />\n                </a-form-item>\n                <a-form-item style=\"padding-left: 35px\">\n                  <a-checkbox-group v-decorator=\"['exposureLocation']\" :options=\"exposureLocation\"\n                                    class=\"checkbox-group\" :disabled=\"disableExposureLocation\" />\n                </a-form-item>\n              </div>\n              <span style=\"flex: 1 1 auto\" />\n            </div>\n          </div>\n\n          <!-- Risiken -->\n          <div :style=\"{ display: current === 2 ? 'block' : 'none' }\">\n            <h2>Welche Vorerkrankungen und Risikofaktoren treffen auf Sie zu?</h2>\n            <div style=\"display: flex\">\n              <span style=\"flex: 1 1 auto\" />\n              <a-form-item>\n                <a-checkbox-group v-decorator=\"['preIllnesses']\" :options=\"preIllnesses\" class=\"checkbox-group\" />\n              </a-form-item>\n              <span style=\"flex: 1 1 auto\" />\n            </div>\n          </div>\n\n          <!-- Persönliche Daten -->\n          <div :style=\"{ display: current === 3 ? 'block' : 'none' }\" class=\"data-form\">\n            <h2>Bitte erfassen Sie nun Ihre persönlichen Daten.</h2>\n            <PatientStammdaten :form=\"form\" />\n          </div>\n\n          <!-- Finish -->\n          <div :style=\"{ display: current === 4 ? 'block' : 'none' }\">\n            <div v-if=\"!createdPatient\">\n              <h2>Sie haben es fast geschafft!</h2>\n              <a-form-item>\n                <a-checkbox @change=\"onCheckedChange\">\n                  Ich erkläre mich mit der Übermittlung meiner Daten zur weiteren\n                  Verarbeitung einverstanden.\n                </a-checkbox>\n                <span v-if=\"showCheckedError\" style=\"color: red\">Bitte bestätigen</span>\n              </a-form-item>\n              <a-button\n                style=\"width: 200px; margin-bottom: 25px;\"\n                type=\"primary\"\n                shape=\"round\"\n                size=\"large\"\n                block\n                @click=\"save\"\n              >\n                <a-icon type=\"save\" />\n                Daten übermitteln\n              </a-button>\n            </div>\n            <div v-if=\"createdPatient\">\n              <h2>Geschafft!</h2>\n              <div style=\"margin-bottom: 20px; display: flex; align-items: center; justify-content: center\">\n                <a-icon type=\"check-circle\" :style=\"{ fontSize: '38px', color: '#08c' }\"\n                        style=\"margin-right: 25px\" />\n                <span>Sie erhalten in Kürze eine Email zur Bestätigung.</span>\n              </div>\n            </div>\n          </div>\n\n        </a-form>\n\n      </div>\n\n      <div class=\"button-row\">\n        <a-button\n          style=\"flex: 0 1 150px;\"\n          type=\"primary\"\n          shape=\"round\"\n          size=\"large\"\n          block\n          class=\"button-row-button\"\n          :style=\"{ visibility: current === 0 || createdPatient ? 'hidden' : 'visible' }\"\n          @click=\"prev\"\n        >\n          <a-icon type=\"arrow-left\" />\n          Zurück\n        </a-button>\n        <a-button\n          style=\"flex: 0 1 150px;\"\n          type=\"primary\"\n          shape=\"round\"\n          size=\"large\"\n          block\n          class=\"button-row-button\"\n          :style=\"{ visibility: current === 4 ? 'hidden' : 'visible' }\"\n          @click=\"next\"\n        >\n          Weiter\n          <a-icon type=\"arrow-right\" />\n        </a-button>\n      </div>\n    </a-card>\n\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport Api from '@/api'\nimport { Patient } from '@/api/SwaggerApi'\nimport { Option } from '@/models'\nimport { SYMPTOMS } from '@/models/symptoms'\nimport { PRE_ILLNESSES } from '@/models/pre-illnesses'\nimport PatientStammdaten from '@/components/PatientStammdaten.vue'\nimport { EXPOSURE_LOCATIONS, EXPOSURES_PUBLIC } from '@/models/exposures'\n\ninterface State {\n  form: any;\n  current: number;\n  createdPatient: Patient | null;\n  symptoms: Option[];\n  exposures: Option[];\n  exposureLocation: Option[];\n  preIllnesses: Option[];\n  steps: any[];\n  checked: boolean;\n  showCheckedError: boolean;\n  disableExposureLocation: boolean;\n  showOtherSymptoms: boolean;\n}\n\nexport default Vue.extend({\n  name: 'PublicRegisterComponent',\n  components: {\n    PatientStammdaten,\n  },\n  data(): State {\n    return {\n      form: this.$form.createForm(this),\n      current: 0,\n      createdPatient: null,\n      symptoms: SYMPTOMS,\n      preIllnesses: PRE_ILLNESSES,\n      exposures: EXPOSURES_PUBLIC,\n      exposureLocation: EXPOSURE_LOCATIONS,\n      steps: [\n        {\n          title: 'Symtpome',\n        },\n        {\n          title: 'Exposition',\n        },\n        {\n          title: 'Risiken',\n          description: 'Vorerkrankungen und Risikofaktoren',\n        },\n        {\n          title: 'Persönliche Daten',\n        },\n      ],\n      checked: false,\n      showCheckedError: false,\n      disableExposureLocation: true,\n      showOtherSymptoms: false,\n    }\n  },\n  methods: {\n    prev() {\n      this.current--\n    },\n    next() {\n      if (this.current === 3) {\n        this.form.validateFields((err: any) => {\n          if (!err) {\n            this.current++\n          }\n        })\n      } else {\n        this.current++\n      }\n    },\n    save() {\n      if (!this.checked) {\n        this.showCheckedError = true\n        return\n      }\n      this.form.validateFields((err: any, values: any) => {\n        if (err) {\n          console.error(err)\n          return\n        }\n\n        const request = {\n          ...values,\n          dateOfBirth: values.dateOfBirth.format('YYYY-MM-DD'),\n          patientStatus: 'REGISTERED',\n          fluImmunization: false, // TODO: Do we need a form field for this?\n          speedOfSymptomsOutbreak: '', // TODO: Do we need a form field for this?\n          // TODO: exposures is not listed here, so currently we \"misuse\" risk areas...\n          riskAreas: [],\n        }\n        if (!request.symptoms) {\n          request.symptoms = []\n        }\n        if (!request.preIllnesses) {\n          request.preIllnesses = []\n        }\n        if (values.exposures) {\n          request.riskAreas = request.riskAreas.concat(values.exposures)\n        }\n        if (this.showOtherSymptoms) {\n          request.symptoms.push(values.symptomsOther)\n        }\n        if (values.exposureLocation) {\n          request.riskAreas = request.riskAreas.concat(\n            values.exposureLocation\n              .map((location: string) => 'CONTACT_WITH_CORONA_' + location),\n          )\n        }\n        request.weakenedImmuneSystem = !!request.preIllnesses // TODO: Do we need this field?\n          .find((illness: string) => illness === 'IMMUNODEFICIENCY')\n        request.coronaContacts = !!request.riskAreas // TODO: DO we need this field?\n          .find((riskArea: string) => riskArea.startsWith('CONTACT_WITH_CORONA'))\n        Api.api.addPatientUsingPost(request).then(patient => {\n          this.createdPatient = patient\n        })\n      })\n    },\n    onCheckedChange(e: Event) {\n      if (!e?.target) {\n        return\n      }\n      this.checked = (e.target as any).checked\n      if (this.checked) {\n        this.showCheckedError = false\n      }\n    },\n    symptomsChanged(event: Event) {\n      const target = event.target as any\n      this.showOtherSymptoms = target.checked\n    },\n    exposuresChanged(checkedValues: string[]) {\n      this.disableExposureLocation = !checkedValues.includes('CONTACT_WITH_CORONA_CASE')\n    },\n  },\n})\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n\n  .public-register-outer-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    overflow: auto;\n    background: linear-gradient(\n        rgba(0, 0, 0, 0.3),\n        rgba(0, 0, 0, 0.3)\n    ), url(\"../assets/wave-bg.svg\");\n    background-size: cover;\n    color: rgba(255, 255, 255, 0.87);\n\n    .button-row-button {\n      box-shadow: 0 3px 3px -2px rgba(0, 0, 0, .2), 0 3px 4px 0 rgba(0, 0, 0, .14), 0 1px 8px 0 rgba(0, 0, 0, .12);\n    }\n\n    .ant-form-item-control-wrapper {\n      width: 100%;\n    }\n\n    .data-form .ant-form-item-control-wrapper {\n      width: 66%;\n    }\n\n    .checkbox-group {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n\n      .ant-checkbox-inner {\n        width: 30px;\n        height: 30px;\n      }\n\n      .ant-checkbox-inner::after {\n        width: 8px;\n        height: 15px;\n        top: 48%;\n      }\n\n      .ant-checkbox-wrapper {\n        margin: 5px;\n        font-size: 18px;\n        display: flex;\n        align-items: center;\n        text-align: left;\n      }\n    }\n\n    .ant-btn:focus {\n      background: #1890ff\n    }\n\n    .card {\n      max-width: 80%;\n      margin: 4rem auto 0 auto;\n      border-radius: 10px;\n      box-shadow: 0 8px 9px -5px rgba(0, 0, 0, .2), 0 15px 22px 2px rgba(0, 0, 0, .14), 0 6px 28px 5px rgba(0, 0, 0, .12);\n      border: none;\n    }\n\n    h1 {\n      font-weight: bold;\n      color: rgba(0, 0, 0, 0.78);\n    }\n\n    h2 {\n      color: rgba(0, 0, 0, 0.7);\n      margin: 35px 0 25px 0;\n    }\n\n    .button-row {\n      background: rgb(211, 211, 211);\n      display: flex;\n      justify-content: space-around;\n      padding: 10px 0;\n      margin: 15px -24px -24px -24px;\n      border-radius: 0 0 10px 10px;\n    }\n\n    @media (max-width: 750px) {\n      h1 {\n        display: none;\n      }\n      .ant-steps {\n        min-height: 1px;\n        display: flex;\n        justify-content: space-around;\n      }\n      .ant-steps-item-content {\n        display: none !important;\n      }\n      .card {\n        max-width: 95%;\n        margin: 3rem auto 3rem auto;\n      }\n      .data-form .ant-form-item-control-wrapper {\n        width: 100%;\n      }\n    }\n\n    @media (min-width: 1200px) {\n      .card {\n        max-width: 1000px;\n        margin: 3rem auto 3rem auto;\n      }\n    }\n  }\n\n</style>\n"]}]}