{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientDataComponent.vue?vue&type=style&index=0&id=43ef12c4&scoped=true&lang=css&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PatientDataComponent.vue","mtime":1584873545345},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/css-loader/dist/cjs.js","mtime":1584795993125},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584795993380},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/postcss-loader/src/index.js","mtime":1584795993354},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoud3JhcHBlciB7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBwYWRkaW5nOiAyNHB4OwogIHdpZHRoOiAxMDAlOwp9Cg=="},{"version":3,"sources":["PatientDataComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmRA;AACA;AACA;AACA;AACA","file":"PatientDataComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div v-if=\"!response\">\n      <!--  Anweisungen -->\n      <div>\n        <h3 :wrapperCol=\"{span: 22, offset: 2}\">\n          Nehmen Sie hier neue Patienten auf. Bitte füllen Sie den Bogen vollständig aus. <br>\n        </h3>\n      </div>\n\n      <a-form :form=\"form\" :layout=\"'horizontal'\" :labelCol=\"{span: 6}\" :wrapperCol=\"{span: 14, offset: 2}\" @submit=\"handleSubmit\">\n        <a-row>\n          <a-col :md=\"12\">\n            <a-form-item label=\"Nachname\">\n              <a-input v-decorator=\"['lastName', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"Vorname\">\n              <a-input v-decorator=\"['firstName', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label='Geschlecht'>\n              <a-radio-group v-decorator=\"['gender', { rules: [{ required: true }] }]\" buttonStyle=\"solid\">\n                <a-radio value='male'>Männl.</a-radio>\n                <a-radio value='female'>Weibl.</a-radio>\n                <a-radio value='divers'>Div.</a-radio>\n              </a-radio-group>\n            </a-form-item>\n            <a-form-item label=\"Geburtsdatum\">\n              <a-date-picker :format=\"dateFormat\" v-decorator=\"['dateOfBirth', { rules: [{ required: true }] }]\"\n                             placeholder=\"Datum wählen\"\n              />\n            </a-form-item>\n            <a-form-item label=\"Krankenkasse\">\n              <a-input v-decorator=\"['insuranceCompany']\" />\n            </a-form-item>\n            <a-form-item label=\"Versichertenr.\">\n              <a-input v-decorator=\"['insuranceMembershipNumber']\" />\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"12\">\n            <a-form-item label=\"E-mail\">\n              <a-input v-decorator=\"['email', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"Telefon\">\n              <a-input v-decorator=\"['phoneNumber', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"Straße\">\n              <a-input v-decorator=\"['street', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"Hausnr.\">\n              <a-input v-decorator=\"['houseNumber', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"PLZ\">\n              <a-input v-decorator=\"['postalCode', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n            <a-form-item label=\"Ort\">\n              <a-input v-decorator=\"['city', { rules: [{ required: true }] }]\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-collapse>\n          <a-collapse-panel header=\"Infektionskette\" key=\"1\">\n            <a-form-item label=\"Haben Sie Kontakt mit einem bestätigten Corona-Patienten gehabt?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n              <a-radio-group v-decorator=\"['coronaContacts', { rules: [{ required: false }] }]\" >\n                <a-radio value=\"true\">Ja</a-radio>\n                <a-radio value=\"false\">Nein</a-radio>\n              </a-radio-group>\n            </a-form-item>\n\n            <a-form-item label=\"Haben Sie sich in einem / mehreren der folgenden Risikogebiete für Coronavirus aufgehalten?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n                <span v-for=\"(riskArea, idx) in RISK_AREAS\" :key=\"idx\">\n                  <a-col :span=\"12\">\n                    <a-checkbox v-model=\"selectedRiskAreas[riskArea.key]\">{{riskArea.description}}</a-checkbox>\n                   </a-col>\n                </span>\n            </a-form-item>\n            <!-- ggf. Aufenthaltszeitraum ergänzen -->\n          </a-collapse-panel>\n\n          <a-collapse-panel header=\"Symptome\" key=\"2\">\n            <a-form-item label=\"Leiden sie unter einem oder mehreren der folgenden Symptome?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n                <span v-for=\"(symptom, idx) in SYMPTOMS\" :key=\"idx\">\n                  <a-col :span=\"12\">\n                    <a-checkbox v-model=\"selectedSymptoms[symptom.key]\">{{symptom.description}}</a-checkbox>\n                   </a-col>\n                </span>\n            </a-form-item>\n\n            <a-form-item label=\"Wie schnell sind die Beschwerden aufgetreten?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n              <a-radio-group v-decorator=\"['speedOfSymptomsOutbreak', { rules: [{ required: false }] }]\" >\n                <a-radio value=\"suddenly\">Plötzlich, innerhalb von einem Tag</a-radio>\n                <a-radio value=\"slow\">Langsam, innerhalb von mehreren Tagen</a-radio>\n              </a-radio-group>\n            </a-form-item>\n\n            <a-form-item label=\"Haben Sie für diese Saison eine Influenza-Impfung erhalten?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n              <a-radio-group v-decorator=\"['fluImmunization', { rules: [{ required: false }] }]\" >\n                <a-radio value=\"true\">Ja</a-radio>\n                <a-radio value=\"false\">Nein</a-radio>\n              </a-radio-group>\n            </a-form-item>\n\n          </a-collapse-panel>\n          <a-collapse-panel header=\"Vorerkrankungen\" key=\"3\">\n            <a-form-item label=\"Haben Sie aufgrund einer Erkrankung ein geschwächtes Immunsystem?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n              <a-radio-group v-decorator=\"['weakenedImmuneSystem', { rules: [{ required: false }] }]\" >\n                <a-radio value=\"true\">Ja</a-radio>\n                <a-radio value=\"false\">Nein</a-radio>\n              </a-radio-group>\n            </a-form-item>\n\n            <a-form-item label=\"Leiden Sie an einer / mehreren der folgenden Erkrankungen?\"\n                         :labelCol=\"{div: 24}\" :wrapperCol=\"{div: 24}\" >\n                <span v-for=\"(illness, idx) in ILLNESSES\" :key=\"idx\">\n                  <a-col :span=\"12\">\n                    <a-checkbox v-model=\"selectedPreIllnesses[illness.key]\">{{illness.description}}</a-checkbox>\n                   </a-col>\n                </span>\n            </a-form-item>\n          </a-collapse-panel>\n        </a-collapse>\n\n        <!-- Datenschutzerklärung Bestätigung-->\n        <br>\n        <a-form-item>\n          <a-checkbox @change=\"onCheck\">Datenschutzerklärung gelesen und verstanden</a-checkbox>\n        </a-form-item>\n\n        <!-- Submit Button -->\n        <a-form-item :wrapperCol=\"{ span: 10, offset: 2 }\" >\n          <a-row>\n            <a-col>\n              <a-button type=\"primary\" html-type=\"submit\">\n                Nichts Anordnen - nur anlegen\n              </a-button>\n            </a-col>\n            <a-col>\n              <a-button type=\"primary\" html-type=\"submit\"> <!-- Platzhalter-->\n                Quarantäne Anordnen\n              </a-button>\n            </a-col>\n            <a-col>\n              <a-button type=\"primary\" html-type=\"submit\" style=\"background-color: green\"> <!-- Platzhalter-->\n                 Test+Quarantäne Anordnen\n              </a-button>\n            </a-col>\n          </a-row>\n        </a-form-item>\n      </a-form>\n    </div>\n    <div v-else>\n      <div>Der Patient wurde erfolgreich registriert.</div>\n      <br>\n      <div>Die Patienten Id lautet: {{response.id}}</div>\n    </div>\n  </div>\n</template>\n\n<!-- Stammdatenerhebung nach Vorbild:  https://my.living-apps.de/gateway/apps/5e6b6ac2a94d7e7d40bb4827/new -->\n\n<script>\n\n  const SYMPTOMS = [\n    {key: 'SORE_THROAT', description: 'Halsschmerzen'},\n    {key: 'HEADACHES', description: 'Kopfschmerzen'},\n    {key: 'FATIGUE', description: 'Abgeschlagenheit'},\n    {key: 'COUGHT', description: 'Husten'},\n    {key: 'COLD', description: 'Schnupfen'},\n    {key: 'LIMB_PAIN', description: 'Gliederschmerzen'},\n    {key: 'DIARRHEA', description: 'Durchfall'},\n    {key: 'SHORTNESS_OF_BREATH', description: 'Luftnot'},\n    {key: 'LESS_38_DEG', description: 'Fieber bis 38°C'},\n    {key: 'MORE_38_DEG', description: 'Fieber über 38°C'}\n  ];\n\n  const ILLNESSES = [\n    { key: \"HEART_DISEASE\", description: \"Herzerkrankungen\"},\n    { key: \"LUNG_DISEASE\", description: \"Lungenerkrankungen\"},\n    { key: \"CIRCULATORY_DISORDER\", description: \"Kreislauf-/Gefäßerkrankungen\"},\n    { key: \"BLOOD_DISEASE\", description: \"Bluterkrankungen oder erhöhte Blutungsneigung\"},\n    { key: \"CANCER\", description: \"Krebserkrankungen\"},\n    { key: \"BONE_DISEASE\", description: \"Erkrankungen der Knochen, Muskeln oder des Bindegewebes\"},\n    { key: \"MENTAL_ILLNESS\", description: \"Psychische, neurologische Erkrankungen\"},\n    { key: \"METABOLIC_DISEASE\", description: \"Stoffwechselerkrankungen (z.B. Diabetes)\"},\n    { key: \"ENTEROPATHY\", description: \"Magen-/Darmerkrankungen\"},\n    { key: \"HEPATIC_DISEASE\", description: \"Erkrankungen der Leber oder Gallenwege\"},\n    { key: \"KIDNEY_DISEASE\", description: \"Nieren-/Harnwegserkrankungen\"},\n    { key: \"OTHER_DISEASE\", description: \"Andere Vorerkrankungen\"}\n  ];\n\n  const RISK_AREAS = [\n    {key: \"IRAN\", description: \"Iran\" },\n    {key: \"ITALY\", description: \"Italien\" },\n    {key: \"CHINA\", description: \"China\" },\n    {key: \"SOUTHCOREA\", description: \"Südkorea\" },\n    {key: \"FRACE\", description: \"Frankreich\" },\n    {key: \"AUSTRIA\", description: \"Österreich\" },\n    {key: \"SPAIN\", description: \"Spanien\" },\n    {key: \"USA\", description: \"USA: Kalofornien, Washington oder New York\" }\n  ];\n\n  export default {\n    name: 'PatientDataComponent',\n    data() {\n      const selectedSymptoms = {};\n      SYMPTOMS.forEach(symptom => { selectedSymptoms[symptom.key] = false });\n\n      const selectedPreIllnesses = {};\n      ILLNESSES.forEach(illness => { selectedPreIllnesses[illness.key] = false });\n\n      const selectedRiskAreas = {};\n      RISK_AREAS.forEach(riskArea => { selectedRiskAreas[riskArea.key] = false });\n\n      return {\n        dateFormat: 'DD/MM/YYYY',\n        form: this.$form.createForm(this, { name: 'coordinated' }),\n        SYMPTOMS,\n        selectedSymptoms,\n        ILLNESSES,\n        selectedPreIllnesses,\n        RISK_AREAS,\n        selectedRiskAreas,\n        response: null\n      }\n    },\n    methods: {\n      onCheck(e) {\n        this.checked = e.target.checked;\n      },\n      handleSubmit(e) {\n        e.preventDefault();\n\n        const symptoms = SYMPTOMS.filter(symptom => this.selectedSymptoms[symptom.key]).map(symptom => symptom.key);\n        const preIllnesses = ILLNESSES.filter(illness => this.selectedPreIllnesses[illness.key]).map(illness => illness.key);\n        const riskAreas = RISK_AREAS.filter(riskArea => this.selectedRiskAreas[riskArea.key]).map(riskArea => riskArea.key);\n\n        this.form.validateFields((err, values) => {\n          if (!this.checked) {\n            // TODO: Show user that this has to be accepted\n            console.error(\"Must accept.\");\n            return;\n          }\n\n          if (!err) {\n            const request = {\n              ...values,\n              dateOfBirth: values['dateOfBirth'].format(\"YYYY-MM-DD\") + \" 00\",\n              symptoms,\n              preIllnesses,\n              riskAreas\n            };\n\n            fetch(\"/patients\", {\n              method: \"POST\",\n              body: JSON.stringify(request),\n              headers: {\n                'Content-Type': 'application/json'\n              }})\n            .then((response) => response.json())\n            .then((data) => {\n              this.response = data;\n            })\n          }\n        });\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .wrapper {\n    text-align: left;\n    padding: 24px;\n    width: 100%;\n  }\n</style>"]}]}