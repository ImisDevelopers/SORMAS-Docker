{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/Account.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/Account.vue","mtime":1586713315430},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBVc2VyUm9sZSB9IGZyb20gJ0AvbW9kZWxzJwppbXBvcnQgeyBhdXRoTWFwcGVyIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL2F1dGgubW9kdWxlJwoKY29uc3QgdGFibGVDb2x1bW5zID0gWwogIC8vIHsKICAvLyAgIHRpdGxlOiAnVm9ybmFtZScsCiAgLy8gICBrZXk6ICdmaXJzdE5hbWUnLAogIC8vICAgZGF0YUluZGV4OiAnZmlyc3ROYW1lJywKICAvLyB9LAogIC8vIHsKICAvLyAgIHRpdGxlOiAnTmFjaG5hbWUnLAogIC8vICAga2V5OiAnbGFzdE5hbWUnLAogIC8vICAgZGF0YUluZGV4OiAnbGFzdE5hbWUnLAogIC8vIH0sCiAgewogICAgdGl0bGU6ICdVc2VybmFtZScsCiAgICBrZXk6ICd1c2VybmFtZScsCiAgICBkYXRhSW5kZXg6ICd1c2VybmFtZScsCiAgfSwKICB7CiAgICB0aXRsZTogJ1JvbGUnLAogICAga2V5OiAndXNlcnJvbGUnLAogICAgZGF0YUluZGV4OiAncm9sZScsCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdyb2xlJyB9LAogIH0sCl0KCmNvbnN0IHJvbGVNYXBwaW5nOiB7IFtrZXkgaW4gVXNlclJvbGVdOiBzdHJpbmcgfSA9IHsKICBVU0VSX1JPTEVfQURNSU46ICdBZG1pbicsCiAgVVNFUl9ST0xFX1JFR1VMQVI6ICdOb3JtYWwnLAp9CgpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAnQWNjb3VudCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlQ29sdW1ucywKICAgICAgcm9sZU1hcHBpbmcsCiAgICAgIHJlZ2lzdGVyVXNlckZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5hdXRoTWFwcGVyLm1hcFN0YXRlKHsKICAgICAgdXNlcjogJ3VzZXInLAogICAgICBpbnN0aXR1dGlvbjogJ2luc3RpdHV0aW9uJywKICAgIH0pLAogICAgLi4uYXV0aE1hcHBlci5tYXBHZXR0ZXJzKHsKICAgICAgdXNlcnM6ICdpbnN0aXR1dGlvblVzZXJzJywKICAgIH0pLAogICAgdXNlcm5hbWUoKTogc3RyaW5nIHsKICAgICAgcmV0dXJuIHRoaXMudXNlcj8udXNlcm5hbWUgfHwgJycKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5hdXRoTWFwcGVyLm1hcEFjdGlvbnMoewogICAgICByZWdpc3RlclVzZXI6ICdyZWdpc3RlclVzZXJGb3JJbnN0aXR1dGlvbicsCiAgICB9KSwKICAgIGhhbmRsZVJlZ2lzdGVyVXNlcigpIHsKICAgICAgdGhpcy5yZWdpc3RlclVzZXJGb3JtLnZhbGlkYXRlRmllbGRzKGFzeW5jKGVycjogRXJyb3IsIHZhbHVlczogYW55KSA9PiB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHRoaXMucmVnaXN0ZXJVc2VyKHsgdXNlcjogdmFsdWVzLCBpbnN0YW5jZTogdGhpcyB9KQogICAgICB9KQogICAgfSwKICB9LAp9KQo="},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <a-card class=\"table-container\">\n    <h3>Eingeloggt: {{ username }}</h3>\n    <a-form\n      :form=\"registerUserForm\"\n      :layout=\"'horizontal'\"\n      :labelCol=\"{ span: 8 }\"\n      :wrapperCol=\"{ span: 16}\"\n      @submit.prevent=\"handleRegisterUser\"\n    >\n      <p>Füge einen Nutzer hinzu</p>\n      <a-form-item label=\"username\">\n        <a-input\n          v-decorator=\"['username', { rules: [{ required: true }] }]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"password\">\n        <a-input\n          type=\"password\"\n          v-decorator=\"['password', { rules: [{ required: true }] }]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"Rolle\">\n        <a-select\n          v-decorator=\"['userRole', { rules: [{ required: true }] }]\"\n        >\n          <a-select-option value=\"USER_ROLE_ADMIN\">Admin</a-select-option>\n          <a-select-option value=\"USER_ROLE_REGULAR\">Regular</a-select-option>\n        </a-select>\n      </a-form-item>\n      <a-button type=\"primary\" html-type=\"submit\">\n        Nutzer hinzufügen\n      </a-button>\n    </a-form>\n    <a-table\n      :columns=\"tableColumns\"\n      :dataSource=\"users()\"\n      :scroll=\"{x: 1, y: 0}\"\n      rowKey=\"email\"\n    >\n      <div slot=\"role\" slot-scope=\"role\">\n        {{ roleMapping[role]}}\n      </div>\n    </a-table>\n\n  </a-card>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { UserRole } from '@/models'\nimport { authMapper } from '@/store/modules/auth.module'\n\nconst tableColumns = [\n  // {\n  //   title: 'Vorname',\n  //   key: 'firstName',\n  //   dataIndex: 'firstName',\n  // },\n  // {\n  //   title: 'Nachname',\n  //   key: 'lastName',\n  //   dataIndex: 'lastName',\n  // },\n  {\n    title: 'Username',\n    key: 'username',\n    dataIndex: 'username',\n  },\n  {\n    title: 'Role',\n    key: 'userrole',\n    dataIndex: 'role',\n    scopedSlots: { customRender: 'role' },\n  },\n]\n\nconst roleMapping: { [key in UserRole]: string } = {\n  USER_ROLE_ADMIN: 'Admin',\n  USER_ROLE_REGULAR: 'Normal',\n}\n\nexport default Vue.extend({\n  name: 'Account',\n  data() {\n    return {\n      tableColumns,\n      roleMapping,\n      registerUserForm: this.$form.createForm(this),\n    }\n  },\n  computed: {\n    ...authMapper.mapState({\n      user: 'user',\n      institution: 'institution',\n    }),\n    ...authMapper.mapGetters({\n      users: 'institutionUsers',\n    }),\n    username(): string {\n      return this.user?.username || ''\n    },\n  },\n  methods: {\n    ...authMapper.mapActions({\n      registerUser: 'registerUserForInstitution',\n    }),\n    handleRegisterUser() {\n      this.registerUserForm.validateFields(async(err: Error, values: any) => {\n        if (err) {\n          return\n        }\n        this.registerUser({ user: values, instance: this })\n      })\n    },\n  },\n})\n</script>\n\n<style>\n  .table-container {\n    width: 100%;\n  }\n</style>\n"]}]}