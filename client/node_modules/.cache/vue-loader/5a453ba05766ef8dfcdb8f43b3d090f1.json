{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue","mtime":1586713315430},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgZ2V0UGx6cywgUGx6IH0gZnJvbSAnQC91dGlsL3Bsei1zZXJ2aWNlJwoKZXhwb3J0IGludGVyZmFjZSBTdGF0ZSB7CiAgcGx6czogUGx6W107Cn0KCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdQbHpJbnB1dCcsCiAgcHJvcHM6IFsnZGVjb3JhdG9yJywgJ2Zvcm0nXSwKICBkYXRhKCk6IFN0YXRlIHsKICAgIHJldHVybiB7CiAgICAgIHBsenM6IFtdLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaGFuZGxlUGx6U2VhcmNoKHZhbHVlOiBzdHJpbmcpIHsKICAgICAgbGV0IHJlc3VsdDogUGx6W10KICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPCAyKSB7CiAgICAgICAgcmVzdWx0ID0gW10KICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXRQbHpzKHZhbHVlKQogICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB0aGlzLnNldFBMWihyZXN1bHRbMF0pCiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucGx6cyA9IHJlc3VsdAogICAgfSwKICAgIGhhbmRsZVBselNlbGVjdGlvbih2YWx1ZTogc3RyaW5nKSB7CiAgICAgIGNvbnN0IHBseiA9IHRoaXMucGx6cy5maW5kKHBseiA9PiBwbHouZmllbGRzLnBseiA9PT0gdmFsdWUpCiAgICAgIGlmIChwbHopIHsKICAgICAgICB0aGlzLnNldFBMWihwbHopCiAgICAgIH0KICAgIH0sCiAgICBzZXRQTFoocGx6OiBQbHopIHsKICAgICAgdGhpcy4kZW1pdCgncGx6Q2hhbmdlZCcsIHBseikKICAgICAgcGx6LmZpZWxkcy5ub3RlID0gJycgLy8gU28gY2l0eSBkb2VzIG5vdCBkaXNwbGF5IGluIHBseiBpbnB1dAogICAgfSwKICB9LAp9KQo="},{"version":3,"sources":["PlzInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PlzInput.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-form-item label=\"PLZ\">\n    <a-auto-complete @search=\"handlePlzSearch\" v-decorator=\"decorator\" @select=\"handlePlzSelection\">\n      <template slot=\"dataSource\">\n        <a-select-option v-for=\"plz in plzs\" :key=\"plz.fields.plz\">\n          {{plz.fields.plz}} {{plz.fields.note}}\n        </a-select-option>\n      </template>\n    </a-auto-complete>\n  </a-form-item>\n</template>\n\n<script lang=\"ts\">\n\nimport Vue from 'vue'\nimport { getPlzs, Plz } from '@/util/plz-service'\n\nexport interface State {\n  plzs: Plz[];\n}\n\nexport default Vue.extend({\n  name: 'PlzInput',\n  props: ['decorator', 'form'],\n  data(): State {\n    return {\n      plzs: [],\n    }\n  },\n  methods: {\n    async handlePlzSearch(value: string) {\n      let result: Plz[]\n      if (!value || value.length < 2) {\n        result = []\n      } else {\n        result = await getPlzs(value)\n        if (result.length === 1) {\n          this.setPLZ(result[0])\n        }\n      }\n      this.plzs = result\n    },\n    handlePlzSelection(value: string) {\n      const plz = this.plzs.find(plz => plz.fields.plz === value)\n      if (plz) {\n        this.setPLZ(plz)\n      }\n    },\n    setPLZ(plz: Plz) {\n      this.$emit('plzChanged', plz)\n      plz.fields.note = '' // So city does not display in plz input\n    },\n  },\n})\n</script>\n\n<style>\n\n</style>\n"]}]}