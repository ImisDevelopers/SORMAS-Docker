{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/PatientDetails.vue?vue&type=style&index=0&id=08474cd5&scoped=true&lang=css&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/views/PatientDetails.vue","mtime":1586724179216},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/css-loader/dist/cjs.js","mtime":1584795993125},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1584795993380},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/postcss-loader/src/index.js","mtime":1584795993354},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKdGFibGUgewogIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7CiAgYm9yZGVyLXNwYWNpbmc6IDE1cHgKfQo="},{"version":3,"sources":["PatientDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkWA;AACA;AACA;AACA","file":"PatientDetails.vue","sourceRoot":"src/views","sourcesContent":["<template style=\"margin: auto\">\n  <div>\n    <div style=\"max-width: 1020px; margin: 0 auto; padding: 0 1rem\">\n      <a-tabs\n        defaultActiveKey=\"1\"\n        v-if=\"patient\"\n      >\n        <a-tab-pane\n          tab=\"Stammdaten\"\n          key=\"1\"\n        >\n          <!-- display user data here-->\n          <div>\n\n            <!-- Allgemein & Adresse -->\n            <a-row :gutter=\"8\">\n              <a-col\n                :span=\"24\"\n                :md=\"12\"\n              >\n                <a-card\n                  title=\"Allgemein\"\n                  align=\"left\"\n                  :extra=\"this.patient.id\"\n                >\n                  <table>\n                    <tr>\n                      <td>Vorname:</td>\n                      <td>{{patient.firstName}}</td>\n                    </tr>\n                    <tr>\n                      <td>Nachname:</td>\n                      <td>{{patient.lastName}}</td>\n                    </tr>\n                    <tr>\n                      <td>Geburtsdatum:</td>\n                      <td>{{dateOfBirth}}</td>\n                    </tr>\n                    <tr>\n                      <td>Geschlecht:</td>\n                      <td>{{gender}}</td>\n                    </tr>\n                  </table>\n                </a-card>\n              </a-col>\n              <a-col\n                :span=\"24\"\n                :md=\"12\"\n              >\n                <a-card\n                  title=\"Adresse\"\n                  align=\"left\"\n                >\n                  <table>\n                    <tr>\n                      <td>Straße:</td>\n                      <td>{{patient.street}}</td>\n                    </tr>\n                    <tr>\n                      <td>Hausnummer:</td>\n                      <td>{{patient.houseNumber}}</td>\n                    </tr>\n                    <tr>\n                      <td>PLZ:</td>\n                      <td>{{patient.zip}}</td>\n                    </tr>\n                    <tr>\n                      <td>Ort:</td>\n                      <td>{{patient.city}}</td>\n                    </tr>\n                  </table>\n                </a-card>\n              </a-col>\n            </a-row>\n\n            <!-- Kontakt & Versicherung & Arbeitgeber -->\n            <a-row :gutter=\"8\" style=\"margin-top: 8px;\">\n              <a-col :span=\"24\" :md=\"8\">\n                <a-card\n                  title=\"Kontakt\"\n                  align=\"left\"\n                >\n                  <table>\n                    <tr>\n                      <td>Telefonnummer:</td>\n                      <td>{{patient.phoneNumber}}</td>\n                    </tr>\n                    <tr>\n                      <td>Email:</td>\n                      <td><a href=\"\">{{patient.email}}</a></td>\n                    </tr>\n                  </table>\n                </a-card>\n              </a-col>\n              <a-col :span=\"24\" :md=\"8\">\n                <a-card\n                  title=\"Versicherung\"\n                  align=\"left\"\n                >\n                  <table>\n                    <tr>\n                      <td>Versicherung:</td>\n                      <td>{{patient.insuranceCompany}}</td>\n                    </tr>\n                    <tr>\n                      <td>V-Nr:</td>\n                      <td>{{patient.insuranceMembershipNumber}}</td>\n                    </tr>\n                  </table>\n                </a-card>\n              </a-col>\n              <a-col :span=\"24\" :md=\"8\">\n                <a-card\n                  title=\"Arbeit\"\n                  align=\"left\"\n                >\n                  <table>\n                    <tr>\n                      <td>Beruf:</td>\n                      <td>{{patient.occupation || 'Keine Angabe'}}</td>\n                    </tr>\n                    <tr>\n                      <td>Arbeitgeber:</td>\n                      <td>{{patient.employer || 'Keine Angabe'}}</td>\n                    </tr>\n                  </table>\n                </a-card>\n              </a-col>\n            </a-row>\n\n            <!-- Symptome und Risiken -->\n            <a-row :gutter=\"8\" style=\"margin-top: 8px;\">\n              <a-col\n                :span=\"24\"\n                :md=\"12\"\n              >\n                <a-card\n                  title=\"Vorerkrankungen und Risikofaktoren\"\n                  align=\"left\"\n                >\n                  <div v-for=\"illness in preIllnesses\" v-bind:key=\"illness\">{{illness}}</div>\n                </a-card>\n              </a-col>\n              <a-col\n                :span=\"24\"\n                :md=\"12\"\n              >\n                <a-card\n                  title=\"Symptome\"\n                  align=\"left\"\n                  :extra=\"'Stand: ' + formatTimestamp(patient.creationTimestamp)\"\n                >\n                  <div v-for=\"symptom in symptoms\" v-bind:key=\"symptom\">{{symptom}}</div>\n                </a-card>\n              </a-col>\n            </a-row>\n\n            <!-- Tests -->\n            <a-row :gutter=\"8\" style=\"margin-top: 8px;\">\n              <a-col span=\"24\">\n                <a-card\n                  :title=\"'Status: ' + (patientStatus ? patientStatus.label : 'Unbekannt')\"\n                  align=\"left\"\n                >\n                  <a-table\n                    class=\"imis-table-no-pagination\"\n                    :columns=\"columnsTests\"\n                    :dataSource=\"tests\"\n                    :scroll=\"{x: 0, y: 0}\"\n                    rowKey=\"id\"\n                  >\n                    <div slot=\"testStatus\" slot-scope=\"testStatus\">\n                      <a-icon :type=\"testResults.find(type => type.id === testStatus).icon\" style=\"margin-right: 5px\" />\n                      {{testResults.find(type => type.id === testStatus).label}}\n                    </div>\n                    <div slot=\"testType\" slot-scope=\"testType\">\n                      <a-icon :type=\"testTypes.find(type => type.id === testType).icon\" style=\"margin-right: 5px\" />\n                      {{testTypes.find(type => type.id === testType).label}}\n                    </div>\n                  </a-table>\n                </a-card>\n              </a-col>\n            </a-row>\n          </div>\n          <br>\n        </a-tab-pane>\n        <a-tab-pane\n          tab=\"Verlauf\"\n          key=\"2\"\n          forceRender\n        >\n          <a-card>\n            <a-timeline\n              style=\"text-align: left; margin-left: 40px\"\n              v-if=\"patient.events.length\"\n            >\n              <!-- List all the events recorded corresponding to the patient over time -->\n              <a-timeline-item\n                v-for=\"event in this.patient.events\"\n                :key=\"event.id\"\n                :color=\"timelineColor(event.eventType)\"\n              >\n                {{ formatTimestamp(event.eventTimestamp) }},\n                {{ eventTypes.find(type => type.id === event.eventType).label }}\n              </a-timeline-item>\n            </a-timeline>\n          </a-card>\n        </a-tab-pane>\n      </a-tabs>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport moment from 'moment'\nimport Api from '@/api'\nimport { LabTest, Patient, Timestamp } from '@/api/SwaggerApi'\nimport { patientMapper } from '@/store/modules/patients.module'\nimport { EventTypeItem, eventTypes, testResults, TestResultType } from '@/models/event-types'\nimport { SYMPTOMS } from '@/models/symptoms'\nimport { PRE_ILLNESSES } from '@/models/pre-illnesses'\nimport { Column } from 'ant-design-vue/types/table/column'\nimport { TestTypeItem, testTypes } from '@/models/test-types'\n\nconst columnsTests: Partial<Column>[] = [\n  {\n    title: 'Test ID',\n    dataIndex: 'testId',\n    key: 'testId',\n  }, {\n    title: 'Test Typ',\n    dataIndex: 'testType',\n    key: 'testType',\n    scopedSlots: {\n      customRender: 'testType',\n    },\n  }, {\n    title: 'Test Status',\n    dataIndex: 'testStatus',\n    key: 'testStatus',\n    scopedSlots: {\n      customRender: 'testStatus',\n    },\n  }, {\n    title: 'Kommentar',\n    dataIndex: 'comment',\n    key: 'comment',\n  },\n]\n\ninterface State {\n  patient: undefined | Patient;\n  patientStatus: EventTypeItem | undefined;\n  eventTypes: any[];\n  symptoms: string[];\n  preIllnesses: string[];\n  dateOfBirth: string;\n  gender: string;\n  tests: LabTest[];\n  columnsTests: Partial<Column>[];\n  testResults: TestResultType[];\n  testTypes: TestTypeItem[];\n}\n\nexport default Vue.extend({\n  name: 'PatientDetails',\n  computed: {\n    ...patientMapper.mapGetters({\n      patientById: 'patientById',\n    }),\n  },\n\n  async created() {\n    this.loadData()\n  },\n\n  data(): State {\n    return {\n      patient: undefined,\n      patientStatus: undefined,\n      eventTypes: eventTypes,\n      testResults: testResults,\n      testTypes: testTypes,\n      symptoms: [],\n      preIllnesses: [],\n      dateOfBirth: '',\n      gender: '',\n      tests: [],\n      columnsTests,\n    }\n  },\n\n  watch: {\n    '$route.params.id'() {\n      this.loadData()\n    },\n  },\n\n  methods: {\n    ...patientMapper.mapMutations({\n      setPatient: 'setPatient',\n    }),\n    async loadData() {\n      // Load Patient\n      const patientId = this.$route.params.id\n      this.patient = this.patientById(this.$route.params.id)\n      if (!this.patient) {\n        const patient = await Api.api.getPatientForIdUsingGet(patientId)\n        this.setPatient(patient)\n        this.patient = patient\n      }\n\n      // Map patient attributes to their display representation\n      this.patientStatus = eventTypes.find(type => type.id === this.patient?.patientStatus)\n      this.symptoms = this.patient.symptoms?.map(symptom => {\n        const patientSymptom = SYMPTOMS.find(symptomFind => symptomFind.value === symptom)\n        return patientSymptom ? patientSymptom.label : symptom\n      }) || []\n      this.preIllnesses = this.patient.preIllnesses?.map(preIllness => {\n        const patientIllness = PRE_ILLNESSES.find(illness => illness.value === preIllness)\n        return patientIllness ? patientIllness.label : preIllness\n      }) || []\n      this.dateOfBirth = moment(this.patient.dateOfBirth).format('DD.MM.YYYY')\n      const patientGender = this.patient.gender || ''\n      this.gender = patientGender === 'male' ? 'männlich' : patientGender === 'female' ? 'weiblich' : 'divers'\n\n      // Tests\n      this.tests = await Api.api.getLabTestForPatientUsingGet(patientId)\n    },\n    timelineColor(eventType: any) {\n      switch (eventType) {\n        case 'TEST_FINISHED_POSITIVE':\n          return 'red'\n        case 'TEST_FINISHED_NEGATIVE':\n          return 'green'\n        default:\n          return 'grey'\n      }\n    },\n    formatTimestamp(timestamp: Timestamp): string {\n      const momentTimestamp = moment(timestamp)\n      if (momentTimestamp.isValid()) {\n        return moment(timestamp).format('DD.MM.YYYY HH:mm')\n      } else {\n        return 'Unbekannt'\n      }\n    },\n  },\n})\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  table {\n    border-collapse: separate;\n    border-spacing: 15px\n  }\n</style>\n"]}]}