{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js??ref--14-3!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/AddOrChangeUserForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/AddOrChangeUserForm.vue","mtime":1589906836717},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvY2lyb3R6a2kvcHJvamVjdHMvdmlydXMvMV8wMTFfYV9pbmZla3Rpb25zZmFsbF91ZWJlcm1pdHRlbGx1bmcvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBhdXRoTWFwcGVyIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL2F1dGgubW9kdWxlJzsKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ0FjY291bnQnLAogIHByb3BzOiBbJ3Zpc2libGUnLCAndXNlciddLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcywgewogICAgICAgIG5hbWU6ICd1c2VyJwogICAgICB9KSwKICAgICAgaXNOZXdVc2VyOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKCkgewogICAgICB0aGlzLmlzTmV3VXNlciA9ICF0aGlzLnVzZXIuaWQ7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBhdXRoTWFwcGVyLm1hcEFjdGlvbnMoewogICAgcmVnaXN0ZXJVc2VyRm9ySW5zdGl0dXRpb246ICdyZWdpc3RlclVzZXJGb3JJbnN0aXR1dGlvbicsCiAgICB1cGRhdGVVc2VyRm9ySW5zdGl0dXRpb246ICd1cGRhdGVVc2VyRm9ySW5zdGl0dXRpb24nCiAgfSksIHsKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoZnVuY3Rpb24gKGVyciwgdmFsdWVzKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgY29uc29sZS53YXJuKGVycik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMuaXNOZXdVc2VyKSB7CiAgICAgICAgICBfdGhpcy5yZWdpc3RlclVzZXJGb3JJbnN0aXR1dGlvbihfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZXMpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuJG5vdGlmaWNhdGlvbi5zdWNjZXNzKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnQmVudXR6ZXIgZXJmb2xncmVpY2ggYW5nZWxlZ3QnLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLmZvcm0ucmVzZXRGaWVsZHMoKTsKCiAgICAgICAgICAgIF90aGlzLiRlbWl0KCdjcmVhdGUnKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnQmVudXR6ZXIga29ubnRlIG5pY2h0IGFuZ2VsZWd0IHdlcmRlbi4nLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLnVwZGF0ZVVzZXJGb3JJbnN0aXR1dGlvbihfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgaWQ6IF90aGlzLnVzZXIuaWQKICAgICAgICAgIH0sIHZhbHVlcykpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy4kbm90aWZpY2F0aW9uLnN1Y2Nlc3MoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICdCZW51dHplciBlcmZvbGdyZWljaCBha3R1YWxpc2llcnQnLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLmZvcm0ucmVzZXRGaWVsZHMoKTsKCiAgICAgICAgICAgIF90aGlzLiRlbWl0KCdjcmVhdGUnKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAnQmVudXR6ZXIga29ubnRlIG5pY2h0IGFrdHVhbGlzaWVydCB3ZXJkZW4uJywKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSkKfSk7"},{"version":3,"sources":["/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/AddOrChangeUserForm.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";AAuGA,OAAO,GAAP,MAAgB,KAAhB;AACA,SAAS,UAAT,QAA2B,6BAA3B;AAEA,eAAe,GAAG,CAAC,MAAJ,CAAW;AACxB,EAAA,IAAI,EAAE,SADkB;AAExB,EAAA,KAAK,EAAE,CAAC,SAAD,EAAY,MAAZ,CAFiB;AAGxB,EAAA,UAAU,EAAE,EAHY;AAIxB,EAAA,IAJwB,kBAIpB;AACF,WAAO;AACL,MAAA,IAAI,EAAE,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,EAA4B;AAAE,QAAA,IAAI,EAAE;AAAR,OAA5B,CADD;AAEL,MAAA,SAAS,EAAE;AAFN,KAAP;AAID,GATuB;AAUxB,EAAA,KAAK,EAAE;AACL,IAAA,IADK,kBACD;AACF,WAAK,SAAL,GAAiB,CAAC,KAAK,IAAL,CAAU,EAA5B;AACD;AAHI,GAViB;AAexB,EAAA,OAAO,oBACF,UAAU,CAAC,UAAX,CAAsB;AACvB,IAAA,0BAA0B,EAAE,4BADL;AAEvB,IAAA,wBAAwB,EAAE;AAFH,GAAtB,CADE;AAKL,IAAA,IALK,kBAKD;AAAA;;AACF,WAAK,IAAL,CAAU,cAAV,CAAyB,UAAC,GAAD,EAAW,MAAX,EAA0B;AACjD,YAAI,GAAJ,EAAS;AACP,UAAA,OAAO,CAAC,IAAR,CAAa,GAAb;AACA;AACD;;AACD,YAAI,KAAI,CAAC,SAAT,EAAoB;AAClB,UAAA,KAAI,CAAC,0BAAL,mBACK,MADL,GAGG,IAHH,CAGQ,YAAK;AACT,YAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B;AACzB,cAAA,OAAO,EAAE,+BADgB;AAEzB,cAAA,WAAW,EAAE;AAFY,aAA3B;;AAIA,YAAA,KAAI,CAAC,IAAL,CAAU,WAAV;;AACA,YAAA,KAAI,CAAC,KAAL,CAAW,QAAX;AACD,WAVH,EAWG,KAXH,CAWS,UAAC,KAAD,EAAiB;AACtB,YAAA,KAAI,CAAC,aAAL,CAAmB,KAAnB,CAAyB;AACvB,cAAA,OAAO,EAAE,wCADc;AAEvB,cAAA,WAAW,EAAE,KAAK,CAAC;AAFI,aAAzB;AAID,WAhBH;AAiBD,SAlBD,MAkBO;AACL,UAAA,KAAI,CAAC,wBAAL;AACE,YAAA,EAAE,EAAE,KAAI,CAAC,IAAL,CAAU;AADhB,aAEK,MAFL,GAIG,IAJH,CAIQ,YAAK;AACT,YAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B;AACzB,cAAA,OAAO,EAAE,mCADgB;AAEzB,cAAA,WAAW,EAAE;AAFY,aAA3B;;AAIA,YAAA,KAAI,CAAC,IAAL,CAAU,WAAV;;AACA,YAAA,KAAI,CAAC,KAAL,CAAW,QAAX;AACD,WAXH,EAYG,KAZH,CAYS,UAAC,KAAD,EAAiB;AACtB,YAAA,KAAI,CAAC,aAAL,CAAmB,KAAnB,CAAyB;AACvB,cAAA,OAAO,EAAE,4CADc;AAEvB,cAAA,WAAW,EAAE,KAAK,CAAC;AAFI,aAAzB;AAID,WAjBH;AAkBD;AACF,OA3CD;AA4CD;AAlDI;AAfiB,CAAX,CAAf","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { authMapper } from '@/store/modules/auth.module'\n\nexport default Vue.extend({\n  name: 'Account',\n  props: ['visible', 'user'],\n  components: {},\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'user' }),\n      isNewUser: false,\n    }\n  },\n  watch: {\n    user() {\n      this.isNewUser = !this.user.id\n    },\n  },\n  methods: {\n    ...authMapper.mapActions({\n      registerUserForInstitution: 'registerUserForInstitution',\n      updateUserForInstitution: 'updateUserForInstitution',\n    }),\n    save() {\n      this.form.validateFields((err: any, values: any) => {\n        if (err) {\n          console.warn(err)\n          return\n        }\n        if (this.isNewUser) {\n          this.registerUserForInstitution({\n            ...values,\n          })\n            .then(() => {\n              this.$notification.success({\n                message: 'Benutzer erfolgreich angelegt',\n                description: '',\n              })\n              this.form.resetFields()\n              this.$emit('create')\n            })\n            .catch((error: Error) => {\n              this.$notification.error({\n                message: 'Benutzer konnte nicht angelegt werden.',\n                description: error.message,\n              })\n            })\n        } else {\n          this.updateUserForInstitution({\n            id: this.user.id,\n            ...values,\n          })\n            .then(() => {\n              this.$notification.success({\n                message: 'Benutzer erfolgreich aktualisiert',\n                description: '',\n              })\n              this.form.resetFields()\n              this.$emit('create')\n            })\n            .catch((error: Error) => {\n              this.$notification.error({\n                message: 'Benutzer konnte nicht aktualisiert werden.',\n                description: error.message,\n              })\n            })\n        }\n      })\n    },\n  },\n})\n"],"sourceRoot":""}]}