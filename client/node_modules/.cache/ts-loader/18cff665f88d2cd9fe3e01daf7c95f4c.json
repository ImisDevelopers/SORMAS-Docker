{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js??ref--14-3!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js??ref--13-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/store/modules/auth.module.ts","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/store/modules/auth.module.ts","mtime":1586713315430},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js","mtime":1584795992192}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvY2lyb3R6a2kvcHJvamVjdHMvdmlydXMvMV8wMTFfYV9pbmZla3Rpb25zZmFsbF91ZWJlcm1pdHRlbGx1bmcvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvY2lyb3R6a2kvcHJvamVjdHMvdmlydXMvMV8wMTFfYV9pbmZla3Rpb25zZmFsbF91ZWJlcm1pdHRlbGx1bmcvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9jaXJvdHpraS9wcm9qZWN0cy92aXJ1cy8xXzAxMV9hX2luZmVrdGlvbnNmYWxsX3VlYmVybWl0dGVsbHVuZy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9jaXJvdHpraS9wcm9qZWN0cy92aXJ1cy8xXzAxMV9hX2luZmVrdGlvbnNmYWxsX3VlYmVybWl0dGVsbHVuZy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvaG9tZS9jaXJvdHpraS9wcm9qZWN0cy92aXJ1cy8xXzAxMV9hX2luZmVrdGlvbnNmYWxsX3VlYmVybWl0dGVsbHVuZy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9jaXJvdHpraS9wcm9qZWN0cy92aXJ1cy8xXzAxMV9hX2luZmVrdGlvbnNmYWxsX3VlYmVybWl0dGVsbHVuZy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IEFwaSwgeyByZW1vdmVCZWFyZXJUb2tlbiwgc2V0QmVhcmVyVG9rZW4gfSBmcm9tICdAL2FwaSc7CmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IHJvdXRlciwgeyBuYXZpZ2F0aW9uUm91dGVzIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBwYXJzZUp3dCB9IGZyb20gJ0AvdXRpbCc7CmltcG9ydCB7IEFjdGlvbnMsIGNyZWF0ZU1hcHBlciwgR2V0dGVycywgTW9kdWxlLCBNdXRhdGlvbnMgfSBmcm9tICd2dWV4LXNtYXJ0LW1vZHVsZSc7Cgp2YXIgQXV0aFN0YXRlID0gZnVuY3Rpb24gQXV0aFN0YXRlKCkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU3RhdGUpOwoKICB0aGlzLmp3dFRva2VuID0gdW5kZWZpbmVkOwogIHRoaXMuand0RGF0YSA9IHVuZGVmaW5lZDsKICB0aGlzLnVzZXIgPSB1bmRlZmluZWQ7CiAgdGhpcy5pbnN0aXR1dGlvbiA9IHVuZGVmaW5lZDsKfTsKCnZhciBBdXRoR2V0dGVycyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0dldHRlcnMpIHsKICBfaW5oZXJpdHMoQXV0aEdldHRlcnMsIF9HZXR0ZXJzKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihBdXRoR2V0dGVycyk7CgogIGZ1bmN0aW9uIEF1dGhHZXR0ZXJzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhHZXR0ZXJzKTsKCiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aEdldHRlcnMsIFt7CiAgICBrZXk6ICJpc0F1dGhlbnRpY2F0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5zdGF0ZS5qd3RUb2tlbjsgLy8gYWRkIGlzIHZhbGlkIGNoZWNrIGV4cGlyZSBkYXRlCiAgICB9CiAgfSwgewogICAga2V5OiAiaW5zdGl0dXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluc3RpdHV0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5zdGF0ZS5pbnN0aXR1dGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyb2xlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm9sZXMoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSRqd3REYXRhOwoKICAgICAgcmV0dXJuICgoX3RoaXMkc3RhdGUkand0RGF0YSA9IHRoaXMuc3RhdGUuand0RGF0YSkgPT09IG51bGwgfHwgX3RoaXMkc3RhdGUkand0RGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGUkand0RGF0YS5yb2xlcykgfHwgW107CiAgICB9CiAgfSwgewogICAga2V5OiAicm91dGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByb3V0ZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmF2aWdhdGlvblJvdXRlcy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gY29uZmlnLnNob3dBbGxWaWV3cyB8fCBfdGhpcy5nZXR0ZXJzLnJvbGVzKCkuc29tZShmdW5jdGlvbiAoYSkgewogICAgICAgICAgdmFyIF9yJG1ldGEsIF9yJG1ldGEkbmF2aWdhdGlvbkluZjsKCiAgICAgICAgICByZXR1cm4gKF9yJG1ldGEgPSByLm1ldGEpID09PSBudWxsIHx8IF9yJG1ldGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfciRtZXRhJG5hdmlnYXRpb25JbmYgPSBfciRtZXRhLm5hdmlnYXRpb25JbmZvKSA9PT0gbnVsbCB8fCBfciRtZXRhJG5hdmlnYXRpb25JbmYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yJG1ldGEkbmF2aWdhdGlvbkluZi5hdXRob3JpdGllcy5pbmNsdWRlcyhhKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5zdGl0dXRpb25Vc2VycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5zdGl0dXRpb25Vc2VycygpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlJGluc3RpdHV0aSwgX3RoaXMkc3RhdGUkaW5zdGl0dXRpMjsKCiAgICAgIHJldHVybiAoX3RoaXMkc3RhdGUkaW5zdGl0dXRpID0gdGhpcy5zdGF0ZS5pbnN0aXR1dGlvbikgPT09IG51bGwgfHwgX3RoaXMkc3RhdGUkaW5zdGl0dXRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkc3RhdGUkaW5zdGl0dXRpMiA9IF90aGlzJHN0YXRlJGluc3RpdHV0aS51c2VycykgPT09IG51bGwgfHwgX3RoaXMkc3RhdGUkaW5zdGl0dXRpMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGUkaW5zdGl0dXRpMi5tYXAoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICB2YXIgX3VzZXIkYXV0aG9yaXRpZXM7CgogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCB1c2VyLCB7CiAgICAgICAgICByb2xlOiAoKF91c2VyJGF1dGhvcml0aWVzID0gdXNlci5hdXRob3JpdGllcykgPT09IG51bGwgfHwgX3VzZXIkYXV0aG9yaXRpZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF91c2VyJGF1dGhvcml0aWVzLmxlbmd0aCkgPT09IDIgPyB1c2VyLmF1dGhvcml0aWVzWzFdLmF1dGhvcml0eSA6ICcnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhHZXR0ZXJzOwp9KEdldHRlcnMpOwoKdmFyIEF1dGhNdXRhdGlvbnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9NdXRhdGlvbnMpIHsKICBfaW5oZXJpdHMoQXV0aE11dGF0aW9ucywgX011dGF0aW9ucyk7CgogIHZhciBfc3VwZXIyID0gX2NyZWF0ZVN1cGVyKEF1dGhNdXRhdGlvbnMpOwoKICBmdW5jdGlvbiBBdXRoTXV0YXRpb25zKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhNdXRhdGlvbnMpOwoKICAgIHJldHVybiBfc3VwZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aE11dGF0aW9ucywgW3sKICAgIGtleTogImxvZ2luU3VjY2VzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW5TdWNjZXNzKGp3dFRva2VuKSB7CiAgICAgIHRoaXMuc3RhdGUuand0VG9rZW4gPSBqd3RUb2tlbjsKICAgICAgdGhpcy5zdGF0ZS5qd3REYXRhID0gcGFyc2VKd3Qoand0VG9rZW4pOwogICAgICBzZXRCZWFyZXJUb2tlbihqd3RUb2tlbik7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9nb3V0U3VjY2VzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0U3VjY2VzcygpIHsKICAgICAgdGhpcy5zdGF0ZS5qd3RUb2tlbiA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy5zdGF0ZS5qd3REYXRhID0gdW5kZWZpbmVkOwogICAgICByZW1vdmVCZWFyZXJUb2tlbigpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEF1dGhlbnRpY2F0ZWRJbnN0aXR1dGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QXV0aGVudGljYXRlZEluc3RpdHV0aW9uKGluc3RpdHV0aW9uKSB7CiAgICAgIHRoaXMuc3RhdGUuaW5zdGl0dXRpb24gPSBpbnN0aXR1dGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRVc2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVc2VyKHVzZXIpIHsKICAgICAgdGhpcy5zdGF0ZS51c2VyID0gdXNlcjsKICAgIH0KICB9XSk7CgogIHJldHVybiBBdXRoTXV0YXRpb25zOwp9KE11dGF0aW9ucyk7Cgp2YXIgQXV0aEFjdGlvbnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9BY3Rpb25zKSB7CiAgX2luaGVyaXRzKEF1dGhBY3Rpb25zLCBfQWN0aW9ucyk7CgogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKEF1dGhBY3Rpb25zKTsKCiAgZnVuY3Rpb24gQXV0aEFjdGlvbnMoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aEFjdGlvbnMpOwoKICAgIHJldHVybiBfc3VwZXIzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aEFjdGlvbnMsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBheWxvYWQpIHsKICAgICAgICB2YXIgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gQXBpLmFwaS5zaWduSW5Vc2VyVXNpbmdQb3N0KHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHBheWxvYWQudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdG9rZW4gPSBfY29udGV4dC5zZW50Lmp3dFRva2VuOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdCgnbG9naW5TdWNjZXNzJywgdG9rZW4pOwogICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKCdnZXRBdXRoZW50aWNhdGVkSW5zdGl0dXRpb24nKTsKICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCgnZ2V0QXV0aGVudGljYXRlZFVzZXInKTsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsICcnICsgdG9rZW4pOwogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FwcCcKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbihfeCkgewogICAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvZ2luOwogICAgfSgpCiAgfSwgewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9nb3V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gIyBUT0RPIGxvZ291dCByZXF1ZXN0CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdCgnbG9nb3V0U3VjY2VzcycpOwogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpOyAvLyAjIFRPRE8gZW1wdHkgc3RhdGUKCiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgICAgcmV0dXJuIF9sb2dvdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvZ291dDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgand0VG9rZW4sIGRlY29kZWQsIG5vdywgdG9rZW5FeHBpcmVEYXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBqd3RUb2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW47CgogICAgICAgICAgICAgICAgaWYgKGp3dFRva2VuKSB7CiAgICAgICAgICAgICAgICAgIGRlY29kZWQgPSBwYXJzZUp3dChqd3RUb2tlbik7CiAgICAgICAgICAgICAgICAgIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgIHRva2VuRXhwaXJlRGF0ZSA9IG5ldyBEYXRlKGRlY29kZWQuZXhwICogMTAwMCk7CgogICAgICAgICAgICAgICAgICBpZiAodG9rZW5FeHBpcmVEYXRlID4gbm93KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21taXQoJ2xvZ2luU3VjY2VzcycsIGp3dFRva2VuKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKCdnZXRBdXRoZW50aWNhdGVkSW5zdGl0dXRpb24nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKCdnZXRBdXRoZW50aWNhdGVkVXNlcicpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29tbWl0KCd0b2tlbkV4cGlyZWQnKQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIHJldHVybiBfaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldEF1dGhlbnRpY2F0ZWRJbnN0aXR1dGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEF1dGhlbnRpY2F0ZWRJbnN0aXR1dGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGluc3RpdHV0aW9uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gQXBpLmFwaS5nZXRJbnN0aXR1dGlvblVzaW5nR2V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGluc3RpdHV0aW9uID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdCgnc2V0QXV0aGVudGljYXRlZEluc3RpdHV0aW9uJywgaW5zdGl0dXRpb24pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkSW5zdGl0dXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBdXRoZW50aWNhdGVkSW5zdGl0dXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEF1dGhlbnRpY2F0ZWRJbnN0aXR1dGlvbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldEF1dGhlbnRpY2F0ZWRVc2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QXV0aGVudGljYXRlZFVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gQXBpLmFwaS5jdXJyZW50VXNlclVzaW5nR2V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWl0KCdzZXRVc2VyJywgdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRVc2VyKCkgewogICAgICAgIHJldHVybiBfZ2V0QXV0aGVudGljYXRlZFVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEF1dGhlbnRpY2F0ZWRVc2VyOwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVnaXN0ZXJVc2VyRm9ySW5zdGl0dXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWdpc3RlclVzZXJGb3JJbnN0aXR1dGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocGF5bG9hZCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBBcGkuYXBpLnJlZ2lzdGVyVXNlclVzaW5nUG9zdChwYXlsb2FkLnVzZXIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goJ2dldEF1dGhlbnRpY2F0ZWRJbnN0aXR1dGlvbicpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlLiRub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3InLAogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ051dHplciBrb25udGUgbmljaHQgaGluenVnZWbDvGd0IHdlcmRlbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVXNlckZvckluc3RpdHV0aW9uKF94MikgewogICAgICAgIHJldHVybiBfcmVnaXN0ZXJVc2VyRm9ySW5zdGl0dXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlZ2lzdGVyVXNlckZvckluc3RpdHV0aW9uOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gQXV0aEFjdGlvbnM7Cn0oQWN0aW9ucyk7CgpleHBvcnQgdmFyIGF1dGhNb2R1bGUgPSBuZXcgTW9kdWxlKHsKICBzdGF0ZTogQXV0aFN0YXRlLAogIGdldHRlcnM6IEF1dGhHZXR0ZXJzLAogIG11dGF0aW9uczogQXV0aE11dGF0aW9ucywKICBhY3Rpb25zOiBBdXRoQWN0aW9ucwp9KTsKZXhwb3J0IHZhciBhdXRoTWFwcGVyID0gY3JlYXRlTWFwcGVyKGF1dGhNb2R1bGUpOw=="},{"version":3,"sources":["/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js??ref--13-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/store/modules/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["import Api, { removeBearerToken, setBearerToken } from '@/api'\nimport { Institution, RegisterUserRequest, User } from '@/api/SwaggerApi'\nimport { config } from '@/config'\nimport { InstitutionRole } from '@/models'\nimport router, { AppRoute, navigationRoutes } from '@/router'\nimport { parseJwt } from '@/util'\nimport { Vue } from 'vue/types/vue'\nimport { Actions, createMapper, Getters, Module, Mutations } from 'vuex-smart-module'\n\ninterface JwtData {\n  roles: InstitutionRole[];\n  exp: number;\n\n  [key: string]: any;\n}\n\nclass AuthState {\n  jwtToken: string | undefined = undefined\n  jwtData: JwtData | undefined = undefined\n  user: User | undefined = undefined\n  institution: Institution | undefined = undefined\n}\n\nclass AuthGetters extends Getters<AuthState> {\n  isAuthenticated(): boolean {\n    return !!this.state.jwtToken // add is valid check expire date\n  }\n\n  institution(): Institution | undefined {\n    return this.state.institution\n  }\n\n  roles() {\n    return this.state.jwtData?.roles || []\n  }\n\n  routes(): AppRoute[] {\n    return navigationRoutes\n      .filter(r => (config.showAllViews ||\n        this.getters.roles().some(a => r.meta?.navigationInfo?.authorities.includes(a))))\n  }\n\n  institutionUsers() {\n    return this.state.institution?.users?.map(user => ({\n      ...user,\n      role: user.authorities?.length === 2 ? user.authorities[1].authority : '',\n    }))\n  }\n}\n\nclass AuthMutations extends Mutations<AuthState> {\n  loginSuccess(jwtToken: string) {\n    this.state.jwtToken = jwtToken\n    this.state.jwtData = parseJwt(jwtToken)\n    setBearerToken(jwtToken)\n  }\n\n  logoutSuccess() {\n    this.state.jwtToken = undefined\n    this.state.jwtData = undefined\n    removeBearerToken()\n  }\n\n  setAuthenticatedInstitution(institution: Institution) {\n    this.state.institution = institution\n  }\n\n  setUser(user: User) {\n    this.state.user = user\n  }\n}\n\nclass AuthActions extends Actions<AuthState, AuthGetters, AuthMutations, AuthActions> {\n  async login(payload: { username: string; password: string }) {\n    // # TODO loading animation, encrypt jwt\n    const token: string | undefined = (await Api.api.signInUserUsingPost({\n      username: payload.username,\n      password: payload.password,\n    })).jwtToken\n    if (token) {\n      this.commit('loginSuccess', token)\n      this.dispatch('getAuthenticatedInstitution')\n      this.dispatch('getAuthenticatedUser')\n      window.localStorage.setItem('token', '' + token)\n      router.push({ name: 'app' })\n    }\n  }\n\n  async logout() {\n    // # TODO logout request\n    this.commit('logoutSuccess')\n    window.localStorage.clear()\n    // # TODO empty state\n    router.push({ name: 'login' })\n  }\n\n  async init() {\n    const jwtToken = window.localStorage.token\n    if (jwtToken) {\n      const decoded = parseJwt(jwtToken)\n      const now = new Date()\n      const tokenExpireDate = new Date(decoded.exp * 1000)\n      if (tokenExpireDate > now) {\n        this.commit('loginSuccess', jwtToken)\n        this.dispatch('getAuthenticatedInstitution')\n        this.dispatch('getAuthenticatedUser')\n      } else {\n        // this.commit('tokenExpired')\n        window.localStorage.clear()\n      }\n    }\n  }\n\n  async getAuthenticatedInstitution() {\n    const institution = await Api.api.getInstitutionUsingGet()\n    this.commit('setAuthenticatedInstitution', institution)\n  }\n\n  async getAuthenticatedUser() {\n    const user = await Api.api.currentUserUsingGet()\n    this.commit('setUser', user)\n  }\n\n  async registerUserForInstitution(payload: { user: RegisterUserRequest; instance: Vue }) {\n    try {\n      const res = await Api.api.registerUserUsingPost(payload.user)\n      this.dispatch('getAuthenticatedInstitution')\n    } catch (err) {\n      payload.instance.$notification.error({\n        message: 'Error',\n        description: 'Nutzer konnte nicht hinzugefügt werden',\n      })\n    }\n  }\n}\n\nexport const authModule = new Module({\n  state: AuthState,\n  getters: AuthGetters,\n  mutations: AuthMutations,\n  actions: AuthActions,\n})\n\nexport const authMapper = createMapper(authModule)\n"],"sourceRoot":""}]}