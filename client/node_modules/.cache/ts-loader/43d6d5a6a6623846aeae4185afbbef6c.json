{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js??ref--14-3!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2Npcm90emtpL3Byb2plY3RzL3ZpcnVzLzFfMDExX2FfaW5mZWt0aW9uc2ZhbGxfdWViZXJtaXR0ZWxsdW5nL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgZ2V0UGx6cyB9IGZyb20gJ0AvdXRpbC9wbHotc2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdQbHpJbnB1dCcsCiAgcHJvcHM6IFsnZGVjb3JhdG9yJywgJ2Zvcm0nXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGx6czogW10sCiAgICAgIGN1cnJlbnRTZWFyY2g6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUGx6U2VhcmNoOiBmdW5jdGlvbiBoYW5kbGVQbHpTZWFyY2godmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5jdXJyZW50U2VhcmNoID0gdmFsdWU7CgogICAgICAgICAgICAgICAgaWYgKCEoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA8IDIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5wbHpzID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGx6cyh2YWx1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMuY3VycmVudFNlYXJjaCAhPT0gdmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRQTFoocmVzdWx0WzBdKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnBsenMgPSBbXTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnBsenMgPSByZXN1bHQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlUGx6U2VsZWN0aW9uOiBmdW5jdGlvbiBoYW5kbGVQbHpTZWxlY3Rpb24odmFsdWUpIHsKICAgICAgdmFyIHBseiA9IHRoaXMucGx6cy5maW5kKGZ1bmN0aW9uIChwbHopIHsKICAgICAgICByZXR1cm4gcGx6LmZpZWxkcy5wbHogPT09IHZhbHVlOwogICAgICB9KTsKCiAgICAgIGlmIChwbHopIHsKICAgICAgICB0aGlzLnNldFBMWihwbHopOwogICAgICB9CiAgICB9LAogICAgc2V0UExaOiBmdW5jdGlvbiBzZXRQTFoocGx6KSB7CiAgICAgIHRoaXMuJGVtaXQoJ3BsekNoYW5nZWQnLCBwbHopOwogICAgICBwbHouZmllbGRzLm5vdGUgPSAnJzsgLy8gU28gY2l0eSBkb2VzIG5vdCBkaXNwbGF5IGluIHBseiBpbnB1dAogICAgfQogIH0KfSk7"},{"version":3,"sources":["/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/PlzInput.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;AAiBA,OAAO,GAAP,MAAgB,KAAhB;AACA,SAAS,OAAT,QAA6B,oBAA7B;AAOA,eAAe,GAAG,CAAC,MAAJ,CAAW;AACxB,EAAA,IAAI,EAAE,UADkB;AAExB,EAAA,KAAK,EAAE,CAAC,WAAD,EAAc,MAAd,CAFiB;AAGxB,EAAA,IAHwB,kBAGpB;AACF,WAAO;AACL,MAAA,IAAI,EAAE,EADD;AAEL,MAAA,aAAa,EAAE;AAFV,KAAP;AAID,GARuB;AASxB,EAAA,OAAO,EAAE;AACD,IAAA,eADC,2BACe,KADf,EAC4B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACjC,gBAAA,KAAI,CAAC,aAAL,GAAqB,KAArB;;AADiC,sBAE7B,CAAC,KAAD,IAAU,KAAK,CAAC,MAAN,GAAe,CAFI;AAAA;AAAA;AAAA;;AAG/B,gBAAA,KAAI,CAAC,IAAL,GAAY,EAAZ;AAH+B;AAAA;;AAAA;AAAA;AAAA,uBAKV,OAAO,CAAC,KAAD,CALG;;AAAA;AAKzB,gBAAA,MALyB;;AAAA,sBAM3B,KAAI,CAAC,aAAL,KAAuB,KANI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAU/B,oBAAI,MAAM,CAAC,MAAP,KAAkB,CAAtB,EAAyB;AACvB,kBAAA,KAAI,CAAC,MAAL,CAAY,MAAM,CAAC,CAAD,CAAlB;;AACA,kBAAA,KAAI,CAAC,IAAL,GAAY,EAAZ;AACD,iBAHD,MAGO;AACL,kBAAA,KAAI,CAAC,IAAL,GAAY,MAAZ;AACD;;AAf8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBlC,KAlBM;AAmBP,IAAA,kBAnBO,8BAmBY,KAnBZ,EAmByB;AAC9B,UAAM,GAAG,GAAG,KAAK,IAAL,CAAU,IAAV,CAAe,UAAC,GAAD;AAAA,eAAS,GAAG,CAAC,MAAJ,CAAW,GAAX,KAAmB,KAA5B;AAAA,OAAf,CAAZ;;AACA,UAAI,GAAJ,EAAS;AACP,aAAK,MAAL,CAAY,GAAZ;AACD;AACF,KAxBM;AAyBP,IAAA,MAzBO,kBAyBA,GAzBA,EAyBQ;AACb,WAAK,KAAL,CAAW,YAAX,EAAyB,GAAzB;AACA,MAAA,GAAG,CAAC,MAAJ,CAAW,IAAX,GAAkB,EAAlB,CAFa,CAEQ;AACtB;AA5BM;AATe,CAAX,CAAf","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { getPlzs, Plz } from '@/util/plz-service'\n\nexport interface State {\n  plzs: Plz[]\n  currentSearch: string\n}\n\nexport default Vue.extend({\n  name: 'PlzInput',\n  props: ['decorator', 'form'],\n  data(): State {\n    return {\n      plzs: [],\n      currentSearch: '',\n    }\n  },\n  methods: {\n    async handlePlzSearch(value: string) {\n      this.currentSearch = value\n      if (!value || value.length < 2) {\n        this.plzs = []\n      } else {\n        const result = await getPlzs(value)\n        if (this.currentSearch !== value) {\n          // If a request takes longer, this request might be outdated since the user already changed the input\n          return\n        }\n        if (result.length === 1) {\n          this.setPLZ(result[0])\n          this.plzs = []\n        } else {\n          this.plzs = result\n        }\n      }\n    },\n    handlePlzSelection(value: string) {\n      const plz = this.plzs.find((plz) => plz.fields.plz === value)\n      if (plz) {\n        this.setPLZ(plz)\n      }\n    },\n    setPLZ(plz: Plz) {\n      this.$emit('plzChanged', plz)\n      plz.fields.note = '' // So city does not display in plz input\n    },\n  },\n})\n"],"sourceRoot":""}]}