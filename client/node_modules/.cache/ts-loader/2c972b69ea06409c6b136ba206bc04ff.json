{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js??ref--14-3!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js??ref--13-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/api/index.ts","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/api/index.ts","mtime":1589906836717},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js","mtime":1584795992192}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmdldCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2Npcm90emtpL3Byb2plY3RzL3ZpcnVzLzFfMDExX2FfaW5mZWt0aW9uc2ZhbGxfdWViZXJtaXR0ZWxsdW5nL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IEFwaSB9IGZyb20gJ0AvYXBpL1N3YWdnZXJBcGknOwp2YXIgYmFzZVVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47CgppZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygnbG9jYWxob3N0JykgfHwgbG9jYXRpb24uaG9zdC5pbmNsdWRlcygnMTI3LjAuMC4xJykpIHsKICBiYXNlVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAnOyAvLyBBbHRlcm5hdGl2ZSBjb25maWcgdG8gcnVuIHRoZSBhcHAgbG9jYWxseSB3aXRob3V0IHJvb3Q7IHNlZSBwcm94eSBjb25mCiAgLy8gYmFzZVVybCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpJwp9Ci8qKgogKiBUaGUgbnBtIHBhY2thZ2UgdGhhdCBjcmVhdGVzIHRoZSBzd2FnZ2VyIGNsaWVudCBkb2VzIG5vdCBoYXZlIGEgb3B0aW9uCiAqIHRvIGNoYW5nZSBoZWFkZXJzLCBidXQgYWZ0ZXIgc2lnbiBpbiB3ZSBoYXZlIHRvIHNldCB0aGUgand0IHRva2VuCiAqIFRvIHRvIHRoaXMgd2UgaGF2ZSB0byByZWluaXRpYWxpemUgdGhlIEFwaS4KICoKICogVG8gZW5zdXJlIGFsbCBjb21wb25lbnRzIGFsd2F5cyB1c2UgdGhlIGN1cnJlbnQgYXBpIHdlIHVzZSBhIHByb3h5IHRoYXQKICogcmV0dXJucyB0aGUgY29ycmVjdCBBcGkgb2JqZWN0IGZ1bmN0aW9uCiAqCiAqLwoKCnZhciBiYXNlQXBpUGFyYW1zID0gewogIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogIGhlYWRlcnM6IHsKICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICB9LAogIHJlZGlyZWN0OiAnZm9sbG93JywKICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJwp9Owp2YXIgYXBpV3JhcHBlciA9IHsKICBhcGlJbnN0YW5jZTogbmV3IEFwaSh7CiAgICBiYXNlVXJsOiBiYXNlVXJsLAogICAgYmFzZUFwaVBhcmFtczogYmFzZUFwaVBhcmFtcwogIH0pCn07CgpmdW5jdGlvbiBjcmVhdGVBcGlQcm94eShmb28pIHsKICAvLyBQcm94eTxGb28+IGlzIGNvbXBhdGlibGUgd2l0aCBGb28KICB2YXIgaGFuZGxlciA9IHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHsKICAgICAgaWYgKGFwaVdyYXBwZXIuYXBpSW5zdGFuY2UuYXBpW3Byb3BdICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGFwaVdyYXBwZXIuYXBpSW5zdGFuY2UuYXBpW3Byb3BdOwogICAgICB9CgogICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICB9CiAgfTsKICByZXR1cm4gbmV3IFByb3h5KGZvbywgaGFuZGxlcik7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRCZWFyZXJUb2tlbih0b2tlbikgewogIGFwaVdyYXBwZXIuYXBpSW5zdGFuY2UgPSBuZXcgQXBpKHsKICAgIGJhc2VVcmw6IGJhc2VVcmwsCiAgICBiYXNlQXBpUGFyYW1zOiBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQXBpUGFyYW1zLCB7CiAgICAgIGhlYWRlcnM6IF9vYmplY3RTcHJlYWQoe30sIGJhc2VBcGlQYXJhbXMuaGVhZGVycywgewogICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHRva2VuCiAgICAgIH0pCiAgICB9KQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiByZW1vdmVCZWFyZXJUb2tlbigpIHsKICBhcGlXcmFwcGVyLmFwaUluc3RhbmNlID0gbmV3IEFwaSh7CiAgICBiYXNlVXJsOiBiYXNlVXJsCiAgfSk7Cn0KZXhwb3J0IGRlZmF1bHQgY3JlYXRlQXBpUHJveHkoYXBpV3JhcHBlci5hcGlJbnN0YW5jZS5hcGkpOw=="},{"version":3,"sources":["/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/eslint-loader/index.js??ref--13-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/api/index.ts"],"names":[],"mappings":";;;;AAAA,SAAS,GAAT,QAAmC,kBAAnC;AAEA,IAAI,OAAO,GAAW,MAAM,CAAC,QAAP,CAAgB,MAAtC;;AAEA,IACE,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAuB,WAAvB,KACA,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAuB,WAAvB,CAFF,EAGE;AACA,EAAA,OAAO,GAAG,qBAAV,CADA,CAEA;AACA;AACD;AACD;;;;;;;;;;;AAUA,IAAM,aAAa,GAAkB;AACnC,EAAA,WAAW,EAAE,aADsB;AAEnC,EAAA,OAAO,EAAE;AACP,oBAAgB;AADT,GAF0B;AAKnC,EAAA,QAAQ,EAAE,QALyB;AAMnC,EAAA,cAAc,EAAE;AANmB,CAArC;AASA,IAAM,UAAU,GAAG;AACjB,EAAA,WAAW,EAAE,IAAI,GAAJ,CAAQ;AACnB,IAAA,OAAO,EAAE,OADU;AAEnB,IAAA,aAAa,EAAE;AAFI,GAAR;AADI,CAAnB;;AAOA,SAAS,cAAT,CAAwB,GAAxB,EAAuC;AACrC;AACA,MAAM,OAAO,GAAG;AACd,IAAA,GAAG,EAAE,aAAC,MAAD,EAAqB,IAArB,EAA6C,QAA7C,EAA8D;AACjE,UAAI,UAAU,CAAC,WAAX,CAAuB,GAAvB,CAA2B,IAA3B,MAAqC,IAAzC,EAA+C;AAC7C,eAAO,UAAU,CAAC,WAAX,CAAuB,GAAvB,CAA2B,IAA3B,CAAP;AACD;;AAED,aAAO,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,IAApB,EAA0B,QAA1B,CAAP;AACD;AAPa,GAAhB;AASA,SAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,OAAf,CAAP;AACD;;AAED,OAAM,SAAU,cAAV,CAAyB,KAAzB,EAAsC;AAC1C,EAAA,UAAU,CAAC,WAAX,GAAyB,IAAI,GAAJ,CAAQ;AAC/B,IAAA,OAAO,EAAE,OADsB;AAE/B,IAAA,aAAa,oBACR,aADQ;AAEX,MAAA,OAAO,oBACF,aAAa,CAAC,OADZ;AAEL,QAAA,aAAa,EAAE,YAAY;AAFtB;AAFI;AAFkB,GAAR,CAAzB;AAUD;AAED,OAAM,SAAU,iBAAV,GAA2B;AAC/B,EAAA,UAAU,CAAC,WAAX,GAAyB,IAAI,GAAJ,CAAQ;AAC/B,IAAA,OAAO,EAAE;AADsB,GAAR,CAAzB;AAGD;AAED,eAAe,cAAc,CAAC,UAAU,CAAC,WAAX,CAAuB,GAAxB,CAA7B","sourcesContent":["import { Api, RequestParams } from '@/api/SwaggerApi'\n\nlet baseUrl: string = window.location.origin\n\nif (\n  location.host.includes('localhost') ||\n  location.host.includes('127.0.0.1')\n) {\n  baseUrl = 'http://localhost:80'\n  // Alternative config to run the app locally without root; see proxy conf\n  // baseUrl = 'http://localhost:8080/api'\n}\n/**\n * The npm package that creates the swagger client does not have a option\n * to change headers, but after sign in we have to set the jwt token\n * To to this we have to reinitialize the Api.\n *\n * To ensure all components always use the current api we use a proxy that\n * returns the correct Api object function\n *\n */\n\nconst baseApiParams: RequestParams = {\n  credentials: 'same-origin',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  redirect: 'follow',\n  referrerPolicy: 'no-referrer',\n}\n\nconst apiWrapper = {\n  apiInstance: new Api({\n    baseUrl: baseUrl,\n    baseApiParams: baseApiParams,\n  }),\n}\n\nfunction createApiProxy(foo: Api['api']): Api['api'] {\n  // Proxy<Foo> is compatible with Foo\n  const handler = {\n    get: (target: Api['api'], prop: keyof Api['api'], receiver: any) => {\n      if (apiWrapper.apiInstance.api[prop] !== null) {\n        return apiWrapper.apiInstance.api[prop]\n      }\n\n      return Reflect.get(target, prop, receiver)\n    },\n  }\n  return new Proxy(foo, handler)\n}\n\nexport function setBearerToken(token: string) {\n  apiWrapper.apiInstance = new Api({\n    baseUrl: baseUrl,\n    baseApiParams: {\n      ...baseApiParams,\n      headers: {\n        ...baseApiParams.headers,\n        Authorization: 'Bearer ' + token,\n      },\n    },\n  })\n}\n\nexport function removeBearerToken() {\n  apiWrapper.apiInstance = new Api({\n    baseUrl: baseUrl,\n  })\n}\n\nexport default createApiProxy(apiWrapper.apiInstance.api)\n"],"sourceRoot":""}]}