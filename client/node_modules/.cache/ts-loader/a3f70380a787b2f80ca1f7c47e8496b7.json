{"remainingRequest":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js??ref--14-3!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePatientStammdatenForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePatientStammdatenForm.vue","mtime":1589906836721},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/thread-loader/dist/cjs.js","mtime":1584795984506},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/babel-loader/lib/index.js","mtime":1584795984276},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/ts-loader/index.js","mtime":1586724162024},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js","mtime":1584795984278},{"path":"/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js","mtime":1584795993380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvY2lyb3R6a2kvcHJvamVjdHMvdmlydXMvMV8wMTFfYV9pbmZla3Rpb25zZmFsbF91ZWJlcm1pdHRlbGx1bmcvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgUGF0aWVudFN0YW1tZGF0ZW4gZnJvbSAnLi9QYXRpZW50U3RhbW1kYXRlbi52dWUnOwppbXBvcnQgQXBpIGZyb20gJ0AvYXBpJzsKaW1wb3J0IHsgcGF0aWVudE1hcHBlciB9IGZyb20gJ0Avc3RvcmUvbW9kdWxlcy9wYXRpZW50cy5tb2R1bGUnOwpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAnQ2hhbmdlUGF0aWVudFN0YW1tZGF0ZW5Gb3JtJywKICBwcm9wczogWyd2aXNpYmxlJywgJ3BhdGllbnQnXSwKICBjb21wb25lbnRzOiB7CiAgICBQYXRpZW50U3RhbW1kYXRlbjogUGF0aWVudFN0YW1tZGF0ZW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcywgewogICAgICAgIG5hbWU6ICdwYXRpZW50JwogICAgICB9KQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIHBhdGllbnRNYXBwZXIubWFwTXV0YXRpb25zKHsKICAgIHNldFBhdGllbnQ6ICdzZXRQYXRpZW50JwogIH0pLCB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKGZ1bmN0aW9uIChlcnIsIHZhbHVlcykgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFsdWVzLmRhdGVPZkJpcnRoID0gdmFsdWVzLmRhdGVPZkJpcnRoLmZvcm1hdCgnWVlZWS1NTS1ERCcpOwoKICAgICAgICBpZiAodmFsdWVzLmRhdGVPZkRlYXRoKSB7CiAgICAgICAgICB2YWx1ZXMuZGF0ZU9mRGVhdGggPSB2YWx1ZXMuZGF0ZU9mRGVhdGguZm9ybWF0KCdZWVlZLU1NLUREJyk7CiAgICAgICAgfQoKICAgICAgICB2YWx1ZXMgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wYXRpZW50LCB7fSwgdmFsdWVzKTsKICAgICAgICBBcGkudXBkYXRlUGF0aWVudFVzaW5nUHV0KHZhbHVlcykudGhlbihmdW5jdGlvbiAodXBkYXRlZFBhdGllbnQpIHsKICAgICAgICAgIF90aGlzLnNldFBhdGllbnQodXBkYXRlZFBhdGllbnQpOwoKICAgICAgICAgIF90aGlzLiRub3RpZmljYXRpb24uc3VjY2Vzcyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXRpZW50IGVyZm9sZ3JlaWNoIGFrdHVhbGlzaWVydCcsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMuZm9ybS5yZXNldEZpZWxkcygpOwoKICAgICAgICAgIF90aGlzLiRlbWl0KCdjcmVhdGUnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzLiRub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAnUGF0aWVudCBrb25udGUgbmljaHQgYWt0dWFsaXNpZXJ0IHdlcmRlbi4nLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0pCn0pOw=="},{"version":3,"sources":["/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cirotzki/projects/virus/1_011_a_infektionsfall_uebermittellung/client/src/components/ChangePatientStammdatenForm.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";AA0BA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,iBAAP,MAA8B,yBAA9B;AACA,OAAO,GAAP,MAAgB,OAAhB;AACA,SAAS,aAAT,QAA8B,iCAA9B;AAEA,eAAe,GAAG,CAAC,MAAJ,CAAW;AACxB,EAAA,IAAI,EAAE,6BADkB;AAExB,EAAA,KAAK,EAAE,CAAC,SAAD,EAAY,SAAZ,CAFiB;AAGxB,EAAA,UAAU,EAAE;AACV,IAAA,iBAAiB,EAAjB;AADU,GAHY;AAMxB,EAAA,IANwB,kBAMpB;AACF,WAAO;AACL,MAAA,IAAI,EAAE,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,EAA4B;AAAE,QAAA,IAAI,EAAE;AAAR,OAA5B;AADD,KAAP;AAGD,GAVuB;AAWxB,EAAA,OAAO,oBACF,aAAa,CAAC,YAAd,CAA2B;AAC5B,IAAA,UAAU,EAAE;AADgB,GAA3B,CADE;AAIL,IAAA,IAJK,kBAID;AAAA;;AACF,WAAK,IAAL,CAAU,cAAV,CAAyB,UAAC,GAAD,EAAW,MAAX,EAA0B;AACjD,YAAI,GAAJ,EAAS;AACP,UAAA,OAAO,CAAC,IAAR,CAAa,GAAb;AACA;AACD;;AACD,QAAA,MAAM,CAAC,WAAP,GAAqB,MAAM,CAAC,WAAP,CAAmB,MAAnB,CAA0B,YAA1B,CAArB;;AACA,YAAI,MAAM,CAAC,WAAX,EAAwB;AACtB,UAAA,MAAM,CAAC,WAAP,GAAqB,MAAM,CAAC,WAAP,CAAmB,MAAnB,CAA0B,YAA1B,CAArB;AACD;;AACD,QAAA,MAAM,qBAAQ,KAAI,CAAC,OAAb,MAAyB,MAAzB,CAAN;AACA,QAAA,GAAG,CAAC,qBAAJ,CAA0B,MAA1B,EACG,IADH,CACQ,UAAC,cAAD,EAAmB;AACvB,UAAA,KAAI,CAAC,UAAL,CAAgB,cAAhB;;AACA,UAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B;AACzB,YAAA,OAAO,EAAE,kCADgB;AAEzB,YAAA,WAAW,EAAE;AAFY,WAA3B;;AAIA,UAAA,KAAI,CAAC,IAAL,CAAU,WAAV;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,QAAX;AACD,SATH,EAUG,KAVH,CAUS,UAAC,KAAD,EAAiB;AACtB,UAAA,KAAI,CAAC,aAAL,CAAmB,KAAnB,CAAyB;AACvB,YAAA,OAAO,EAAE,2CADc;AAEvB,YAAA,WAAW,EAAE,KAAK,CAAC;AAFI,WAAzB;AAID,SAfH;AAgBD,OA1BD;AA2BD;AAhCI;AAXiB,CAAX,CAAf","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport PatientStammdaten from './PatientStammdaten.vue'\nimport Api from '@/api'\nimport { patientMapper } from '@/store/modules/patients.module'\n\nexport default Vue.extend({\n  name: 'ChangePatientStammdatenForm',\n  props: ['visible', 'patient'],\n  components: {\n    PatientStammdaten,\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this, { name: 'patient' }),\n    }\n  },\n  methods: {\n    ...patientMapper.mapMutations({\n      setPatient: 'setPatient',\n    }),\n    save() {\n      this.form.validateFields((err: any, values: any) => {\n        if (err) {\n          console.warn(err)\n          return\n        }\n        values.dateOfBirth = values.dateOfBirth.format('YYYY-MM-DD')\n        if (values.dateOfDeath) {\n          values.dateOfDeath = values.dateOfDeath.format('YYYY-MM-DD')\n        }\n        values = { ...this.patient, ...values }\n        Api.updatePatientUsingPut(values)\n          .then((updatedPatient) => {\n            this.setPatient(updatedPatient)\n            this.$notification.success({\n              message: 'Patient erfolgreich aktualisiert',\n              description: '',\n            })\n            this.form.resetFields()\n            this.$emit('create')\n          })\n          .catch((error: Error) => {\n            this.$notification.error({\n              message: 'Patient konnte nicht aktualisiert werden.',\n              description: error.message,\n            })\n          })\n      })\n    },\n  },\n})\n"],"sourceRoot":""}]}